<html>
<head>
<title>Make Your Own Rich Text Editor in Reactjs using Draftjs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Draftjsåœ¨Reactjsä¸­åˆ¶ä½œè‡ªå·±çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/make-your-own-rich-text-editor-in-reactjs-using-draftjs-25a0b4fb05e5?source=collection_archive---------1-----------------------#2019-02-01">https://medium.com/hackernoon/make-your-own-rich-text-editor-in-reactjs-using-draftjs-25a0b4fb05e5?source=collection_archive---------1-----------------------#2019-02-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ccd877c01f48304d7e3ae3838cb3575f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PivStT-baA3BQb43"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Photo by <a class="ae jg" href="https://unsplash.com/@jakobowens1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jakob Owens</a> on <a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6418" class="jh ji hu bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dt translated">ä¸ºä»€ä¹ˆäº†è§£å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å¾ˆé‡è¦ï¼Ÿ</h1><p id="3928" class="pw-post-body-paragraph kf kg hu kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hn dt translated">ä½ å¯èƒ½å·²ç»åœ¨instagramã€facebookå’Œå…¶ä»–å¹³å°ä¸Šçœ‹åˆ°äº†ç±»ä¼¼ä¸Šé¢çš„ä»‹ç»éƒ¨åˆ†ã€‚å®ƒä»¬æ”¯æŒå¾ˆå¤šå¾ˆé…·çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¡¨æƒ…ç¬¦å·ã€æ ‡ç­¾ã€@æåŠå’Œå…¶ä»–ä¸œè¥¿ã€‚ç”šè‡³è¿˜æœ‰å…¶ä»–ç±»å‹çš„æ ·å¼(å¦‚ç²—ä½“ã€æ–œä½“ã€å¼•å·ç­‰)ã€‚ä½ æœ‰æ²¡æœ‰æƒ³è¿‡å¦‚ä½•åœ¨è‡ªå·±çš„reactåº”ç”¨ä¸­å®ç°è¿™ä¸€ç‚¹ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆä½ å°±åœ¨æ­£ç¡®çš„åœ°æ–¹ï¼Œå› ä¸ºåœ¨é˜…è¯»å®Œè¿™ç¯‡æ–‡ç« ä¹‹åï¼Œä½ å°†èƒ½å¤Ÿåƒé‚£æ ·åˆ¶ä½œä½ è‡ªå·±çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚å“¦ï¼ŒğŸ˜„æ­£å¦‚æœ€åä¸€è¡Œå’Œæ ‡é¢˜æ‰€ç¤ºï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ä¸ºé‚£äº›äº†è§£ReactåŸºç¡€çŸ¥è¯†çš„äººå‡†å¤‡çš„ï¼Œè¿™æ˜¯æˆ‘ä¿è¯çš„å”¯ä¸€å…ˆå†³æ¡ä»¶ã€‚å› æ­¤ï¼Œåœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»ç†Ÿæ‚‰Reactã€‚</p></div><div class="ab cl ld le hc lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hn ho hp hq hr"><h1 id="a7b2" class="jh ji hu bd jj jk lk jm jn jo ll jq jr js lm ju jv jw ln jy jz ka lo kc kd ke dt translated">è®©æˆ‘ä»¬å¼€å§‹åˆ¶ä½œè‡ªå·±çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</h1><p id="3097" class="pw-post-body-paragraph kf kg hu kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hn dt translated">åœ¨çœŸæ­£å¼€å§‹ç¼–å†™Reactä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦Reactç”Ÿæ€ç³»ç»Ÿï¼Œè¿™æ„å‘³ç€æ‰€æœ‰è¿™äº›Webpacké…ç½®ï¼Œä»¥åŠbabel transpilerçš„é…ç½®ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œä½†ä»å¤´å¼€å§‹åšæ‰€æœ‰è¿™äº›äº‹æƒ…å°†ä¼šä½¿æœ¬æ–‡è‡´åŠ›äºçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é»¯ç„¶å¤±è‰²ã€‚æ„Ÿè°¢è„¸ä¹¦çš„å¼€æºé¡¹ç›®<a class="ae jg" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ä½ çš„ç»ˆç«¯ä¸Šå†™ä¸€ä¸ªç®€å•çš„å‘½ä»¤æ¥å¼€å§‹åˆ¶ä½œReact Appã€‚</p><p id="0fff" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å› æ­¤ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨create-react-appæ¥åˆ¶ä½œReactåº”ç”¨ç¨‹åºã€‚æˆ‘ä¸ä¼šåœ¨æˆ‘çš„ç³»ç»Ÿä¸­å…¨å±€å®‰è£…è¿™ä¸ªåŒ…ï¼Œè€Œæ˜¯ä½¿ç”¨npx(å®ƒä¼šè‡ªåŠ¨ä»npmæ³¨å†Œè¡¨ä¸­ä¸ºæ‚¨å®‰è£…ä¸€ä¸ªåŒåçš„åŒ…ï¼Œå¹¶è°ƒç”¨å®ƒã€‚å®Œæˆåï¼Œå·²å®‰è£…çš„è½¯ä»¶åŒ…å°†ä¸ä¼šå‡ºç°åœ¨æ‚¨çš„globalsä¸­çš„ä»»ä½•ä½ç½®ï¼Œå› æ­¤ä»é•¿è¿œæ¥çœ‹ï¼Œæ‚¨ä¸å¿…æ‹…å¿ƒæ±¡æŸ“)ã€‚</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="6dba" class="md ji hu lz b fv me mf l mg mh">npx create-react-app myapp<br/>cd myapp<br/>npm start</span></pre><p id="c6e2" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å˜£ï¼Œä½ çš„react appæ‰˜ç®¡åœ¨localhost:3000/ã€‚</p><p id="714b" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">æ‚¨å°†æ‹¥æœ‰è¿™æ ·çš„ç›®å½•ç»“æ„</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="5e77" class="md ji hu lz b fv me mf l mg mh">my-app<br/>â”œâ”€â”€ README.md<br/>â”œâ”€â”€ node_modules<br/>â”œâ”€â”€ package.json<br/>â”œâ”€â”€ .gitignore<br/>â”œâ”€â”€ public<br/>â”‚   â”œâ”€â”€ favicon.ico<br/>â”‚   â”œâ”€â”€ index.html<br/>â”‚   â””â”€â”€ manifest.json<br/>â””â”€â”€ src<br/>    â”œâ”€â”€ App.css<br/>    â”œâ”€â”€ App.js<br/>    â”œâ”€â”€ App.test.js<br/>    â”œâ”€â”€ index.css<br/>    â”œâ”€â”€ index.js<br/>    â”œâ”€â”€ logo.svg<br/>    â””â”€â”€ serviceWorker.js</span></pre><p id="0553" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">æ‰€ä»¥æœ€åï¼Œæˆ‘ä»¬å‡†å¤‡å¥½å®é™…ç¼–ç æˆ‘ä»¬çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨(å…´å¥‹çš„â• â•)ã€‚é‚£æˆ‘ä»¬è¦åšä»€ä¹ˆï¼Ÿæ£€æŸ¥æˆ‘çš„<a class="ae jg" href="http://myrte.surge.sh" rel="noopener ugc nofollow" target="_blank">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</a>ã€‚å°è¯•é”®å…¥( :ã€@æˆ–ä»»ä½•é“¾æ¥)æ‚¨å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å¨åŠ›ã€‚æ‚¨å¯èƒ½è¿˜è§è¿‡ä¸€äº›å˜é‡ï¼Œå¦‚(<strong class="kh hv"> organization.nameã€organization.emailå’Œè®¸å¤šå…¶ä»–å˜é‡)ã€‚</strong>åªè¦ä½ ç‚¹å‡»å®ƒä»¬ï¼Œä½ å°±ä¼šçœ‹åˆ°è½¦æŠŠçš„å°èƒ¡å­è¯­æ³•ã€‚ä¸è¦å®³æ€•ï¼Œå¦‚æœä½ ä¸çŸ¥é“è½¦æŠŠã€‚è¿™ä¸æ˜¯æœ¬æ–‡æ‰€å¿…éœ€çš„ã€‚æˆ‘å®ç°äº†å®ƒä»¬ï¼Œåœ¨æˆ‘çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘éœ€è¦åˆ¶ä½œä¸€ä¸ªç•Œé¢ï¼Œæ¯ä¸ªç»„ç»‡å¯ä»¥ä¸ºä¸€äº›åŠ¨ä½œè§¦å‘å™¨è®¾è®¡ä»–ä»¬è‡ªå·±çš„ç”µå­é‚®ä»¶æ¨¡æ¿ã€‚</p><h1 id="ec89" class="jh ji hu bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dt translated">è‰ç¨¿åŸºç¡€-js</h1><p id="d8e5" class="pw-post-body-paragraph kf kg hu kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hn dt translated">Draft-jsä¸­ä½¿ç”¨çš„åŸºæœ¬ç»„ä»¶æ˜¯ä¸€ä¸ªç¼–è¾‘æ§ä»¶ã€‚å¦‚æœæˆ‘ä»¬å°†æ–‡æœ¬è¾“å…¥ä¸ç¼–è¾‘æ§ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œé‚£ä¹ˆæ–‡æœ¬è¾“å…¥çš„å€¼å°±æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ã€‚åœ¨ä¸€ä¸ªç¼–è¾‘æ§ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çš„ä¸ä»…ä»…æ˜¯ç®€å•çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¿å­˜æ–‡æœ¬ã€å…‰æ ‡ä½ç½®ç­‰çš„å¯¹è±¡ã€‚é™¤äº†æ–‡æœ¬ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº†EditorStateå¯¹è±¡ã€‚è¦æˆåŠŸä½¿ç”¨ç¼–è¾‘å™¨æ§ä»¶ï¼Œå¿…é¡»çŸ¥é“å‡ ä¸ªå…³é”®äº‹é¡¹:</p><ul class=""><li id="9844" class="mi mj hu kh b ki lp km lq kq mk ku ml ky mm lc mn mo mp mq dt translated">EditorStateæ§ä»¶æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ„å‘³ç€æ‚¨æ°¸è¿œä¸ä¼šæ›´æ”¹å®ƒæˆ–å®ƒçš„ä»»ä½•å±æ€§ã€‚ç›¸åï¼Œå¦‚æœæ‚¨æƒ³è¦æ›´æ”¹åƒæ–‡æœ¬è¿™æ ·çš„å†…å®¹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•(å…·ä½“æ¥è¯´æ˜¯onChange())è¿”å›ä¸€ä¸ªå…¨æ–°çš„EditorStateï¼Œå®ƒæ˜¯æ—§EditorStateå’Œæ‚¨çš„æ–°æ›´æ”¹çš„å‰¯æœ¬(è¯·è®°ä½Reactä¸­çš„â€œStateâ€å¯¹è±¡ï¼Œå°±åƒæˆ‘ä»¬ä½¿ç”¨setState()æ–¹æ³•æ¥æ›´æ”¹çŠ¶æ€è€Œä¸æ˜¯ç›´æ¥æ”¹å˜å¯¹è±¡ä¸€æ ·)ã€‚ç„¶åï¼Œæ–°çš„EditorStateè¢«æä¾›ç»™ç¼–è¾‘æ§ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°æ‚¨çš„æ›´æ”¹ã€‚</li><li id="f333" class="mi mj hu kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq dt translated">EditorStateæ§ä»¶æœ‰å­å¯¹è±¡ï¼Œæ˜¾ç¤ºç¼–è¾‘å™¨ä¸­æ‰€è¡¨ç¤ºå†…å®¹çš„å®é™…çŠ¶æ€ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€å…‰æ ‡/é€‰æ‹©ã€æ ·å¼ç­‰ã€‚</li></ul><h2 id="8c9a" class="md ji hu bd jj mw mx my jn mz na nb jr kq nc nd jv ku ne nf jz ky ng nh kd ni dt translated">å®šä¹‰</h2><ul class=""><li id="25d9" class="mi mj hu kh b ki kj km kn kq nj ku nk ky nl lc mn mo mp mq dt translated"><strong class="kh hv"> <em class="nm">ç¼–è¾‘å™¨çŠ¶æ€:</em> </strong>ç¼–è¾‘å™¨ä¸­æ‰€ä»£è¡¨çš„å¯¹è±¡è´Ÿè´£å½“å‰çŠ¶æ€</li><li id="5b98" class="mi mj hu kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq dt translated"><strong class="kh hv"> <em class="nm"> ContentState: </em> </strong>ç¼–è¾‘å™¨ä¸­è´Ÿè´£æ–‡æœ¬çš„å¯¹è±¡ã€‚å†…å®¹ç”±å†…å®¹å—ç»„æˆã€‚</li><li id="38f8" class="mi mj hu kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq dt translated"><strong class="kh hv"><em class="nm">selection state:</em></strong>è´Ÿè´£å…‰æ ‡çš„å¯¹è±¡å’Œå…‰æ ‡çš„é€‰æ‹©åŒºåŸŸ</li><li id="5bee" class="mi mj hu kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq dt translated"><strong class="kh hv"> <em class="nm">å®ä½“:</em> </strong>å¯ä»¥æ·»åŠ åˆ°éƒ¨åˆ†æ–‡æœ¬ä¸­çš„å…ƒæ•°æ®</li></ul><p id="843b" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">è¿™äº›æ˜¯ä½ åœ¨ä»£ç å’Œè‰ç¨¿ä¸­éšå¤„å¯è§çš„ä¸€äº›åŸºæœ¬æœ¯è¯­â€”â€”js<a class="ae jg" href="https://draftjs.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank">docs</a>ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h2 id="bda9" class="md ji hu bd jj mw mx my jn mz na nb jr kq nc nd jv ku ne nf jz ky ng nh kd ni dt translated">æˆ‘ä»¬çš„é¡¹ç›®</h2><p id="9148" class="pw-post-body-paragraph kf kg hu kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc hn dt translated">è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„ååº”åº”ç”¨ç¨‹åºã€‚ä½ å¯ä»¥ä»<a class="ae jg" href="https://github.com/dsc712/Rich-Text-Editor" rel="noopener ugc nofollow" target="_blank"> Github </a>ä¸­å…‹éš†è¿™ä¸ªé¡¹ç›®è¿›è¡Œå¹¶æ’è¯„å®¡ï¼Œä½†æ˜¯æˆ‘ä¼šæ¨èä½ è‡ªå·±åˆ¶ä½œã€‚é¡¹ç›®ä¸­çš„App.jsæ˜¯æˆ‘ä»¬çš„æ ¹ç»„ä»¶ã€‚çœ‹èµ·æ¥åƒè¿™æ ·</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="78f2" class="md ji hu lz b fv me mf l mg mh"><em class="nm">import </em>React, { Component } <em class="nm">from </em>'react';<br/><em class="nm">import </em>MyEditor <em class="nm">from </em>'./Editor'</span><span id="4bd0" class="md ji hu lz b fv nn mf l mg mh"><em class="nm">class </em>App <em class="nm">extends </em>Component {<br/>  render() {<br/>    <em class="nm">return </em>(<br/>        &lt;MyEditor/&gt;<br/>    );<br/>  }<br/>}</span><span id="53a7" class="md ji hu lz b fv nn mf l mg mh"><em class="nm">export default </em>App;</span></pre><p id="3c6e" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">ç°åœ¨ï¼Œæˆ‘çš„ç¼–è¾‘æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿå®ƒæ¥è‡ªæˆ‘ä»¬çš„å¦ä¸€ä¸ªç»„ä»¶Editor.jsã€‚ç°åœ¨ï¼Œåœ¨åˆ¶ä½œè¿™ä¸ªç»„ä»¶ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å®‰è£…draft-jså’Œdraft-js-plugins-editorã€‚ç­‰ç­‰ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰npmåº“çš„æƒ…å†µä¸‹å®ç°ä½ çš„ç¼–è¾‘å™¨ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è¿›å£å®ƒå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œå®ƒç»™äº†ä½ ä¸€ç§åœ¨ç¼–è¾‘å™¨ä¸­æ·»åŠ è®¸å¤šå³æ’å³ç”¨æ‰©å±•çš„æ–¹å¼ï¼Œå°±åƒ(æåŠã€è¡¨æƒ…ç¬¦å·ã€é“¾æ¥ã€å†…åµŒå·¥å…·æ ç­‰)ã€‚è¯¥ç¼–è¾‘å™¨ä»…åŸºäºdraft-jsç¼–è¾‘å™¨æ„å»ºã€‚å› ä¸ºè¿™ä¸ªåº“åªç»™ç¼–è¾‘ã€‚å¯¹äºå…¶ä»–ç±»å‹çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦draft-jsã€‚æ›´å¤šç»†èŠ‚è¯·çœ‹è¿™ä¸ªã€‚</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="8b8e" class="md ji hu lz b fv me mf l mg mh">npm install draft-js draft-js-plugins-editor --save</span></pre><p id="87d6" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬ä¸ºEditor.jsåšå¥½äº†å‡†å¤‡</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="b7b1" class="md ji hu lz b fv me mf l mg mh"><em class="nm">import </em>React, { Component } <em class="nm">from </em>'react';<br/><em class="nm">import </em>{ convertToRaw, EditorState, RichUtils } <em class="nm">from </em>'draft-js';<br/><em class="nm">import </em>Editor <em class="nm">from </em>'draft-js-plugins-editor';</span></pre><p id="53d3" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">è¿›å£è¿™äº›ä¸œè¥¿ã€‚</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="c57d" class="md ji hu lz b fv me mf l mg mh"><em class="nm">class </em>MyEditor <em class="nm">extends </em>Component {</span><span id="ff3d" class="md ji hu lz b fv nn mf l mg mh">    constructor(props) {<br/>        <em class="nm">super</em>(props);<br/>        <em class="nm">this</em>.state = { editorState: EditorState.createEmpty() };<br/>      <em class="nm">this</em>.onChange = (editorState) =&gt; <em class="nm">this</em>.setState({editorState});<br/>    }</span><span id="9241" class="md ji hu lz b fv nn mf l mg mh">handleKeyCommand = ( command, editorState ) =&gt; {</span><span id="f991" class="md ji hu lz b fv nn mf l mg mh"><em class="nm">let </em>newState;<br/>      newState = RichUtils.handleKeyCommand( editorState, command );<br/>      <em class="nm">if</em>( newState ) {<br/>         <em class="nm">this</em>.onChange(newState);<br/>         <em class="nm">return </em>"handled"<br/>      }</span><span id="fc95" class="md ji hu lz b fv nn mf l mg mh"><em class="nm">return </em>'non-handled'</span><span id="4c5d" class="md ji hu lz b fv nn mf l mg mh">};</span><span id="aee1" class="md ji hu lz b fv nn mf l mg mh">&lt;Editor<br/>      <em class="nm">editorState</em>={ <em class="nm">this</em>.state.editorState }<br/>      <em class="nm">onChange</em>={ <em class="nm">this</em>.onChange }<br/>      <em class="nm">handleKeyCommand</em>={ <em class="nm">this</em>.handleKeyCommand }/&gt;</span><span id="faf4" class="md ji hu lz b fv nn mf l mg mh">}</span></pre><p id="39a2" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">æˆ‘ä»¬å·²ç»ä½¿ç”¨EditorState.createEmpty()æ–¹æ³•åˆå§‹åŒ–äº†ç¼–è¾‘å™¨çš„ç©ºçŠ¶æ€ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°MyEditorç»„ä»¶çš„çŠ¶æ€ä¸­ã€‚å› æ­¤ï¼Œå½“ç¼–è¾‘å™¨çŠ¶æ€æ›´æ”¹æ—¶ï¼Œç»„ä»¶ä¼šé‡æ–°å‘ˆç°ã€‚ç¼–è¾‘å™¨ç»„ä»¶æœ‰3ä¸ªpropsç¬¬ä¸€ä¸ªæ˜¯editorStateï¼Œä¸‹ä¸€ä¸ªæ˜¯onChangeï¼Œè¯´æ˜æ˜¯ä¸€ä¸ª<a class="ae jg" href="https://stackoverflow.com/questions/42522515/what-are-controlled-components-and-uncontrolled-components-in-reactjs-and-what" rel="noopener ugc nofollow" target="_blank">æ§åˆ¶çš„</a>ç»„ä»¶ï¼Œç¬¬ä¸‰ä¸ªæ˜¯handleKeyCommandï¼Œå®ƒä½¿ç”¨RichUtilsä¸ºé€‰ä¸­çš„çŠ¶æ€æä¾›å¯Œæ–‡æœ¬ç¼–è¾‘ã€‚å°è¯•åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥cmd + bã€cmd +iã€cmd + uå’Œcmd + zï¼Œçœ‹çœ‹å…¶ä¸­çš„ç¥å¥‡ä¹‹å¤„ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå®šåˆ¶å‘½ä»¤æ£€æŸ¥<a class="ae jg" href="https://stackoverflow.com/questions/42311815/how-to-create-custom-key-bindings-in-draft-js" rel="noopener ugc nofollow" target="_blank">ã€‚è¿™å°±æ˜¯å¯Œutilsä¸ºæˆ‘ä»¬åšçš„ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€äº›draft-jsæ’ä»¶ï¼Œçœ‹çœ‹å…¶ä¸­çš„ç¥å¥‡ä¹‹å¤„ã€‚</a></p><p id="b05b" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated"><strong class="kh hv">æå¤–æŒ‚</strong></p><p id="0092" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å¯¼å…¥æ’ä»¶åŠå…¶CSSæ–‡ä»¶ã€‚</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="c069" class="md ji hu lz b fv me mf l mg mh"><em class="nm">import </em>createMentionPlugin, { defaultSuggestionsFilter } <em class="nm">from </em>'draft-js-mention-plugin';<br/><em class="nm">import </em>'draft-js-mention-plugin/lib/plugin.css';</span></pre><p id="4a06" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">åˆ›å»ºä¸€ä¸ªreference . jsæ–‡ä»¶ï¼Œå‘å…¶ä¸­è¾“å…¥ä¸€äº›æ•°æ®ï¼Œç„¶åä»è¯¥æ–‡ä»¶ä¸­å¯¼å‡ºæ•°æ®ã€‚</p><p id="b3e0" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated"><strong class="kh hv">ææ. js </strong></p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="f7bd" class="md ji hu lz b fv me mf l mg mh"><em class="nm">const </em>mentions = [<br/>    {<br/>        name: 'Matthew Russell',<br/>        link: 'https://twitter.com/mrussell247',<br/>        avatar: 'https://pbs.twimg.com/profile_images/517863945/mattsailing_400x400.jpg',<br/>    },<br/>    {<br/>        name: 'Julian Krispel-Samsel',<br/>        link: 'https://twitter.com/juliandoesstuff',<br/>        avatar: 'https://avatars2.githubusercontent.com/u/1188186?v=3&amp;s=400',<br/>    },<br/>    {<br/>        name: 'Jyoti Puri',<br/>        link: 'https://twitter.com/jyopur',<br/>        avatar: 'https://avatars0.githubusercontent.com/u/2182307?v=3&amp;s=400',<br/>    },<br/>    {<br/>        name: 'Max Stoiber',<br/>        link: 'https://twitter.com/mxstbr',<br/>        avatar: 'https://pbs.twimg.com/profile_images/763033229993574400/6frGyDyA_400x400.jpg',<br/>    },<br/>    {<br/>        name: 'Nik Graf',<br/>        link: 'https://twitter.com/nikgraf',<br/>        avatar: 'https://avatars0.githubusercontent.com/u/223045?v=3&amp;s=400',<br/>    },<br/>    {<br/>        name: 'Pascal Brandt',<br/>        link: 'https://twitter.com/psbrandt',<br/>        avatar: 'https://pbs.twimg.com/profile_images/688487813025640448/E6O6I011_400x400.png',<br/>    },<br/>];</span><span id="cc45" class="md ji hu lz b fv nn mf l mg mh"><em class="nm">export default </em>mentions;</span></pre><p id="b92f" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å¾ˆå¥½ï¼Œç°åœ¨å°†è¿™ä¸ªæ–‡ä»¶å¯¼å…¥åˆ°MyEditorç»„ä»¶ä¸­ã€‚</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="cd54" class="md ji hu lz b fv me mf l mg mh"><em class="nm">import </em>mentions <em class="nm">from </em>'./mentions';</span></pre><p id="05e5" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">ç°åœ¨åˆå§‹åŒ–è¿™ä¸ªæ’ä»¶</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="8e79" class="md ji hu lz b fv me mf l mg mh"><em class="nm">// mention plugin ( do it globally out of MyEditor class )<br/>const </em>mentionPlugin = createMentionPlugin();<br/><em class="nm">const </em>{ MentionSuggestions } = mentionPlugin;</span></pre><p id="7633" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">ç°åœ¨å°†è¿™ä¸ªç»„ä»¶ä½œä¸ºå…„å¼Ÿç»„ä»¶æ·»åŠ åˆ°MyEditorä¸­ï¼Œå¹¶å°†è¿™ä¸¤ä¸ªç»„ä»¶åŒ…è£…åˆ°ä¸€ä¸ªdivæ ‡ç­¾æˆ–reactç‰‡æ®µä¸­ã€‚</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="aef1" class="md ji hu lz b fv me mf l mg mh">&lt;div&gt;<br/>&lt;MyEditor ... /&gt;<br/>&lt;MentionSuggestions<br/>    <em class="nm">onSearchChange</em>= { <em class="nm">this</em>.onSearchChange }<br/>    <em class="nm">suggestions</em>= { <em class="nm">this</em>.state.suggestions }<br/>    <em class="nm">onAddMention</em>= { <em class="nm">this</em>.onAddMention }<br/>/&gt;<br/>&lt;/div&gt;</span></pre><p id="01a2" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">åœ¨æ„é€ å‡½æ•°ä¸­ä¿®æ”¹è¿™ä¸€è¡Œï¼Œ</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="fc1c" class="md ji hu lz b fv me mf l mg mh"><em class="nm">this</em>.state = {editorState: EditorState.createEmpty(), suggestions: mentions};</span></pre><p id="42b9" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="3b90" class="md ji hu lz b fv me mf l mg mh">onSearchChange = ({ value }) =&gt; {<br/>    <em class="nm">this</em>.setState({<br/>        suggestions: defaultSuggestionsFilter(value, mentions),<br/>    });<br/>};<br/></span><span id="a148" class="md ji hu lz b fv nn mf l mg mh">onAddMention = () =&gt; { // add logic after mentioning someone here };</span></pre><p id="8307" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å¤ªå¥½äº†ï¼Œä½ å·²ç»å‡†å¤‡å¥½åœ¨ä½ çš„ç¼–è¾‘å™¨ä¸­æ·»åŠ @ mentionsäº†ã€‚å°è¯•é”®å…¥@ã€‚è¿™ä¸ªæ’ä»¶éœ€è¦ä¸€äº›é¢å¤–çš„å·¥ä½œï¼Œå…¶ä»–å¯ç”¨çš„æ’ä»¶éå¸¸ç›´æ¥å’Œæ˜“äºä½¿ç”¨ã€‚åªéœ€å¯¼å…¥å®ƒä»¬ï¼Œåˆå§‹åŒ–å®ƒä»¬ï¼Œæœ€åä½œä¸ºå…„å¼Ÿç»„ä»¶æ·»åŠ åˆ°MyEditorä¸­ã€‚å°±è¿™æ ·ï¼Œä½ å·²ç»å‡†å¤‡å¥½ä½¿ç”¨å®ƒä»¬äº†ã€‚æŸ¥çœ‹æˆ‘çš„<a class="ae jg" href="https://github.com/dsc712/Rich-Text-Editor" rel="noopener ugc nofollow" target="_blank"> GitHub repoä¸­æä¾›çš„ç¤ºä¾‹ä»£ç ã€‚</a></p><p id="5e31" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘æ˜¯å¦‚ä½•æ·»åŠ å˜é‡å’Œå—å˜é‡ç»„ä»¶çš„ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯åŸå­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨é€€æ ¼æ—¶æ•´ä¸ªå—è¢«åˆ é™¤ã€‚è¿™æ ·æ¨¡æ¿ä¸­çš„å˜é‡å°±ä¸ä¼šè¢«æ±¡æŸ“ã€‚æ£€æŸ¥<a class="ae jg" href="https://github.com/dsc712/Rich-Text-Editor" rel="noopener ugc nofollow" target="_blank"> repoä¸­çš„Variable.jså’ŒBlockVariable.jsæ–‡ä»¶ã€‚</a>ä»£ç å¾ˆç®€å•ï¼Œè¿‡ä¸€éå°±æ¸…æ¥šäº†ã€‚</p><p id="1bf5" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å…¶ä¸­ä½¿ç”¨çš„ä¸»è¦æ¦‚å¿µæ˜¯</p><ol class=""><li id="de17" class="mi mj hu kh b ki lp km lq kq mk ku ml ky mm lc no mo mp mq dt translated"><a class="ae jg" href="https://draftjs.org/docs/api-reference-modifier" rel="noopener ugc nofollow" target="_blank">ä¿®æ”¹å™¨</a></li><li id="416e" class="mi mj hu kh b ki mr km ms kq mt ku mu ky mv lc no mo mp mq dt translated"><a class="ae jg" href="https://draftjs.org/docs/api-reference-atomic-block-utils" rel="noopener ugc nofollow" target="_blank"> AtomicBlockUtils </a></li><li id="8791" class="mi mj hu kh b ki mr km ms kq mt ku mu ky mv lc no mo mp mq dt translated"><a class="ae jg" href="https://draftjs.org/docs/advanced-topics-entities" rel="noopener ugc nofollow" target="_blank">å®ä½“</a></li></ol><p id="a867" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ å¼€å§‹ä½¿ç”¨draft-jsã€‚Draft-jsæœ‰å¾ˆå¤šä¸œè¥¿ï¼Œä½ è¦åŠªåŠ›å»å‘ç°ã€‚ä½ è¶Šæ·±å…¥å…¶ä¸­ï¼Œä½ å°±è¶Šèƒ½å’Œä½ çš„ç¼–è¾‘ç©å¾—å¼€å¿ƒã€‚æˆ‘ä¼šè¯•ç€å¤šå†™å‡ ç¯‡å…³äºdraft-jsé«˜çº§ä¸»é¢˜çš„æ–‡ç« ã€‚</p><p id="79dd" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">ä¸€äº›å…¥é—¨èµ„æº:</p><ol class=""><li id="6014" class="mi mj hu kh b ki lp km lq kq mk ku ml ky mm lc no mo mp mq dt translated"><a class="ae jg" href="https://draftjs.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank">è‰ç¨¿-jså•æ®</a></li><li id="303f" class="mi mj hu kh b ki mr km ms kq mt ku mu ky mv lc no mo mp mq dt translated">æˆ‘å‘ç°çš„<a class="ae jg" href="https://draft-js-samples.now.sh/Home" rel="noopener ugc nofollow" target="_blank">å¥½èµ„æº</a>ä¹‹ä¸€ã€‚</li></ol><p id="b513" class="pw-post-body-paragraph kf kg hu kh b ki lp kk kl km lq ko kp kq lr ks kt ku ls kw kx ky lt la lb lc hn dt translated">å¦‚æœä½ å–œæ¬¢ï¼Œè¯·é¼“æŒã€‚æ˜¯çš„ï¼Œå¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œå¯ä»¥åœ¨è¿™é‡Œæé—®ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ã€‚å¿«ä¹ç¼–ç ğŸ˜ƒã€‚</p></div></div>    
</body>
</html>