<html>
<head>
<title>Reverse Proxy using Express Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨ExpressæœåŠ¡å™¨çš„åå‘ä»£ç†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/reverse-proxy-using-express-server-1f1b0b5a6e67?source=collection_archive---------7-----------------------#2019-04-26">https://medium.com/hackernoon/reverse-proxy-using-express-server-1f1b0b5a6e67?source=collection_archive---------7-----------------------#2019-04-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="b2e3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æˆ‘ç»å¸¸åœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šè¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ç»å¸¸ä»åŒä¸€ä¸ªåŸŸåæä¾›åç«¯å’Œå‰ç«¯æœåŠ¡ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨å¦‚ä½•æœåŠ¡åç«¯å’Œå‰ç«¯åº”ç”¨ç¨‹åºï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸¤ä¸ªä¸åŒçš„åº”ç”¨ç¨‹åºé€šè¿‡ä¸€ä¸ªåŸŸåœ¨ä¸åŒçš„ç«¯å£ä¸Šåˆ—å‡ºã€‚</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/fc3799c9446b5aad5a0511d9e9669a04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wnsHKH6rbXM-Y2NwG6DoQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Made with <a class="ae kf" href="https://www.draw.io/" rel="noopener ugc nofollow" target="_blank">https://www.draw.io/</a></figcaption></figure><p id="a0f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåç«¯è¿è¡Œåœ¨3000ç«¯å£ä¸Šï¼Œå‰ç«¯è¿è¡Œåœ¨5000ç«¯å£ä¸Šã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨ç«¯å£4000(åå‘ä»£ç†æœåŠ¡å™¨)ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºä¸Šå‘é€è¯·æ±‚ï¼Œå®ƒå°†æŸ¥æ‰¾URLæ˜¯å¦ä»¥/api/*ç»“å°¾çš„ç›®æ ‡ã€‚å®ƒä¼šå°†è¯·æ±‚è½¬å‘åˆ°åç«¯(3000)ï¼Œå¦‚æœURLä»¥/client/*ç»“å°¾ã€‚å®ƒä¼šå°†å…¶è½¬å‘åˆ°å‰ç«¯(5000)ã€‚</p><p id="66c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æˆ‘ä»¬å°†ä½¿ç”¨ExpressæœåŠ¡å™¨æ¥æ„å»ºæˆ‘ä»¬çš„ä»£ç†æœåŠ¡å™¨ã€‚ä¸ºäº†è¿è¡ŒexpressæœåŠ¡å™¨ï¼Œæ‚¨å°†æœ€æ–°ç‰ˆæœ¬çš„nodeå®‰è£…åœ¨æ‚¨çš„æœºå™¨ä¸Šã€‚ä»è¿™é‡Œä¸‹è½½å¹¶å®‰è£…å®ƒã€‚ç°åœ¨è½¬åˆ°æ‚¨æƒ³è¦åˆ›å»ºè¿™ä¸ªåå‘ä»£ç†æœåŠ¡å™¨çš„é¡¹ç›®ç›®å½•ï¼Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="jq jr js jt fq kg kh ki kj aw kk dt"><span id="3e91" class="kl km hu kh b fv kn ko l kp kq">npm init<br/>npm install express<br/>npm install express-http-proxy<br/>npm install request</span></pre><p id="f165" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æ‚¨å°†çœ‹åˆ°package.jsonåˆ›å»ºåœ¨æ‚¨çš„é¡¹ç›®ç›®å½•ä¸­ã€‚ç°åœ¨åˆ›å»ºserver.jsæ–‡ä»¶ï¼Œå¹¶å°†ä¸‹é¢çš„ä»£ç ç²˜è´´åˆ°å…¶ä¸­ã€‚</p><pre class="jq jr js jt fq kg kh ki kj aw kk dt"><span id="a6fd" class="kl km hu kh b fv kn ko l kp kq">const proxy = require('express-http-proxy');</span><span id="a916" class="kl km hu kh b fv kr ko l kp kq">const app = require('express')();</span><span id="0ff2" class="kl km hu kh b fv kr ko l kp kq">const express = require('express')</span><span id="ed2d" class="kl km hu kh b fv kr ko l kp kq">const request = require('request');</span><span id="2c60" class="kl km hu kh b fv kr ko l kp kq">app.use('/api', proxy('http://localhost:3000')); // this will proxy all incoming requests to /api route to back end</span><span id="3a6e" class="kl km hu kh b fv kr ko l kp kq">app.use('/client', proxy('http://localhost:5000')); // this will proxy all incoming requests to /client route to front end</span><span id="1020" class="kl km hu kh b fv kr ko l kp kq">app.listen(4000, () =&gt; {</span><span id="e447" class="kl km hu kh b fv kr ko l kp kq">  request('http://localhost:5000', function (err, res, body) {</span><span id="e10a" class="kl km hu kh b fv kr ko l kp kq">    if(err === null){</span><span id="8987" class="kl km hu kh b fv kr ko l kp kq">        console.log('backend is reachable from proxy server')</span><span id="fb57" class="kl km hu kh b fv kr ko l kp kq">    }<br/>    else{</span><span id="a60c" class="kl km hu kh b fv kr ko l kp kq">        console.log('backend is not reachable from proxy server')</span><span id="c275" class="kl km hu kh b fv kr ko l kp kq">    }</span><span id="0773" class="kl km hu kh b fv kr ko l kp kq">  });</span><span id="31d7" class="kl km hu kh b fv kr ko l kp kq">  request('http://localhost:3000', function (err, res, body) {</span><span id="5ab8" class="kl km hu kh b fv kr ko l kp kq">   if(err === null){</span><span id="7c82" class="kl km hu kh b fv kr ko l kp kq">        console.log('frontend is reachable from proxy server')</span><span id="da53" class="kl km hu kh b fv kr ko l kp kq">   }<br/>   else{</span><span id="3e2f" class="kl km hu kh b fv kr ko l kp kq">    console.log('frontend is not reachable from proxy server')</span><span id="01d5" class="kl km hu kh b fv kr ko l kp kq">   }</span><span id="7e0e" class="kl km hu kh b fv kr ko l kp kq">  });</span><span id="be13" class="kl km hu kh b fv kr ko l kp kq">});</span></pre><p id="2136" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç°åœ¨æ˜¯æœ€ç®€å•çš„éƒ¨åˆ†ï¼Œåªéœ€è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¿è¡Œä»£ç†æœåŠ¡å™¨ï¼Œå¹¶ç¡®ä¿æ‚¨çš„åç«¯å’Œå‰ç«¯åœ¨é‚£ä¸ªæ—¶å€™æ˜¯æ´»çš„ã€‚</p><pre class="jq jr js jt fq kg kh ki kj aw kk dt"><span id="bf19" class="kl km hu kh b fv kn ko l kp kq">node server.js // you can user forever or pm2 to run it in infinite loop</span></pre><p id="dba7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¦‚æœæ‚¨ç°åœ¨ä»ä¸€ä¸ªç«¯å£æä¾›ä¸¤ä¸ªä¸åŒçš„åº”ç”¨ç¨‹åºï¼Œé‚£å°±å¥½äº†ã€‚</p><p id="99e2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä¸€å¦‚æ—¢å¾€ï¼Œè¿™é‡Œæœ‰ä¸€äº›ç¼–ç¨‹å¹½é»˜ç»™ä½ </p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff ks"><img src="../Images/24a4ae159cc8aaf84aeb99e741e36c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*b-v-xoVzNcWJTZG4q_5LyQ.jpeg"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Stop it Patrick, youâ€™re scaring him ğŸ˜„</figcaption></figure><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="kt ku l"/></div></figure></div></div>    
</body>
</html>