<html>
<head>
<title>YATS - Yet Another TSP Solution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">YATS -å¦ä¸€ä¸ª TSP è§£å†³æ–¹æ¡ˆ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/yats-yet-another-tsp-solution-6a71aeabe1f8#2019-07-14">https://medium.com/hackernoon/yats-yet-another-tsp-solution-6a71aeabe1f8#2019-07-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/3951e39480d63926f0924f2583fed3ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4R_yvcsLIUCu5pSF.jpg"/></div></div></figure><div class=""/><p id="2211" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä»Šå¤©ï¼Œæˆ‘æƒ³å‘Šè¯‰ä½ æˆ‘ä¸ºè‘—åçš„æ¬§å‡ é‡Œå¾·æ—…è¡Œæ¨é”€å‘˜é—®é¢˜æå‡ºçš„å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚è¿™ç§å¯å‘å¼è§£å†³æ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯ç›´è§‚ï¼Œå› æ­¤æ˜“äºå®ç°ã€‚</p><p id="024d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿˜æœ‰æ›´å¥½çš„<a class="ae ka" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.258.9895&amp;rep=rep1&amp;type=pdf" rel="noopener ugc nofollow" target="_blank">(æ›´ç²¾ç¡®+æ›´å¿«)æ–¹æ³•</a>ï¼Œä½†æˆ‘é€‰æ‹©èŠ±æ—¶é—´ä¸æ‚¨åˆ†äº«æˆ‘çš„ç®€å•è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæˆ‘è®¤ä¸ºå®ƒå¯ä»¥ä½œä¸ºè¯¥é¢†åŸŸçš„ä¸€ä¸ªå¾ˆå¥½çš„ä»‹ç»ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæˆ‘åœ¨æ™ºèƒ½ç§»åŠ¨é¢†åŸŸçš„åŒè¡Œçš„ä¸€ä¸ªæ–°è§‚ç‚¹ï¼Œæˆ‘ç›¸ä¿¡ä»–ä»¬å’Œæˆ‘ä¸€æ ·ï¼Œæœ‰æ—¶åªæƒ³æŠŠäº‹æƒ…åšå¥½ã€‚</p><p id="81be" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœä½ åªæ˜¯æƒ³çœ‹çœ‹ä»£ç ï¼Œå› ä¸ºï¼Œå˜¿ï¼Œä½ ä¹Ÿåªæ˜¯æƒ³æŠŠäº‹æƒ…åšå¥½ï¼Œæ¬¢è¿ä½ ç›´æ¥å»<a class="ae ka" href="https://github.com/DalyaG/CodeSnippetsForPosterity/blob/master/YATS_YetAnotherTSPSolution/YetAnotherTSPSolution.ipynb" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>ã€‚</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/335fdd80b22d449723b3a43cddfe1291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*eKko1QL9PLHDo7pi.jpg"/></div></figure><blockquote class="kg kh ki"><p id="353a" class="jc jd kj je b jf jg jh ji jj jk jl jm kk jo jp jq kl js jt ju km jw jx jy jz hn dt translated">N <strong class="je ig">æ³¨æ„:</strong>è¿™ç¯‡æ–‡ç« ä¸­çš„ä»£ç æ˜¯ç”¨<strong class="je ig"> Python 3.7 </strong>ç¼–å†™çš„ï¼Œè¿™ä¸»è¦æ„å‘³ç€å®ƒæœ‰<strong class="je ig">ç±»å‹</strong>ï¼Œè¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ Python ç‰¹æ€§ğŸ’œ</p></blockquote><h1 id="26fa" class="kn ko if bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">è®©æˆ‘ä»¬æŠŠäº‹æƒ…åšå¥½</h1><p id="5d98" class="pw-post-body-paragraph jc jd if je b jf ll jh ji jj lm jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz hn dt translated">è¿™æ˜¯æˆ‘æƒ³åœ¨æ˜ŸæœŸäº”æ—©ä¸Šï¼Œåœ¨æˆ‘æ˜æ˜æ¬²ç¡çš„å®¶ä¹¡ä¸ºä»¥è‰²åˆ—çš„å‘¨æœ«è€Œæ­»å»ä¹‹å‰åšçš„äº‹æƒ…çš„ç®€çŸ­æ¸…å•:æ‹œè®¿åšäº†æƒŠäººçš„<a class="ae ka" href="https://en.wikipedia.org/wiki/Scorched_rice" rel="noopener ugc nofollow" target="_blank"> Tahdig </a>çš„æ³¢æ–¯å¤«å¦‡ï¼Œåƒæ¥è‡ªå¯çˆ±çš„å¾·é²å…¹å®¶åº­çš„ç¾å‘³<a class="ae ka" href="https://en.wikipedia.org/wiki/Flatbread" rel="noopener ugc nofollow" target="_blank">çš®å¡”</a>ï¼Œä¸ºæˆ‘è‡ªå·±å’Œæˆ‘çš„ç‹—ä¹°ä¸€äº›é£Ÿç‰©å’Œè¯ç‰©ï¼Œè¿˜å¯ä»¥åœ¨ç‹—å…¬å›­ä¼‘æ¯ä¸€ä¼šå„¿ã€‚</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lq"><img src="../Images/ac090536a6b31adc4a76a4d5062f69ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4gqO5dPleAgS-ElSSt7Wpg.png"/></div></div></figure><p id="0529" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘è¯´è¿‡è¿™æ˜¯ä¸€ä¸ªæ²‰ç¡çš„å°é•‡å—ï¼Ÿæ‰€ä»¥æˆ‘å¿…é¡»åœ¨æ‰€æœ‰å•†åº—å…³é—¨ä¹‹å‰æ‰¾åˆ°å®Œæˆæ‰€æœ‰ä»»åŠ¡çš„æœ€å¿«è·¯çº¿ã€‚</p><p id="5931" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç”±äº E-TSP æ˜¯ä¸€ä¸ª<a class="ae ka" href="https://en.wikipedia.org/wiki/NP-hardness" rel="noopener ugc nofollow" target="_blank"> NP-hard é—®é¢˜</a>ï¼Œæˆ‘æƒ³å®ç°ä¸€ä¸ªå¯å‘å¼æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¯»æ‰¾æœ€ä¼˜è§£(æ˜¯çš„ï¼Œæˆ‘çŸ¥é“è¿™ä¸ªè¾“å…¥çš„å¤§å°æ˜¯ 7ï¼Œæˆ‘ä»¬å°†åœ¨æœ€åæ¢ç´¢æ›´å¤§çš„è¾“å…¥)ã€‚</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lr"><img src="../Images/1a68477e1df0aa1e07a94a67a61a9f8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gMQ6bd8teGJPY0Z9KQ99cQ.png"/></div></div></figure><h1 id="939b" class="kn ko if bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">å®Œæˆæ¯”å®Œç¾æ›´å¥½</h1><p id="f788" class="pw-post-body-paragraph jc jd if je b jf ll jh ji jj lm jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz hn dt translated">çš„ç¡®ï¼Œå®Œæˆæ¯”å®Œç¾æ›´å¥½ï¼Œä½†æˆ‘ä»¬å¦‚ä½•æ‰èƒ½å®Œæˆè¿™ä¸€é¡¹å‘¢ï¼Ÿï¼Ÿ</p><p id="32e1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨è¿‡å»çš„å‡ å¹´é‡Œï¼Œæˆ‘æ˜¯ä¸€åæ™ºèƒ½ç§»åŠ¨ç®—æ³•å¼€å‘äººå‘˜ï¼Œæ‰€ä»¥æˆ‘æœ‰æ—¶ä¼šåœ¨æ— ä¼‘æ­¢çš„ç§»åŠ¨ç®—æ³•è®ºæ–‡ä¸­è¿·å¤±ï¼Œè¿™æ¬¡æˆ‘é‡åˆ°äº†<a class="ae ka" href="https://link.springer.com/article/10.3758/BF03196857" rel="noopener ugc nofollow" target="_blank">è¿™ä¸€ç¯‡</a>å®ƒè¡¨æ˜äººç±»éå¸¸å–„äºç”¨ä»–ä»¬çš„è§†è§‰ç›´è§‰æ‰¾åˆ° E-TSP çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™è®©æˆ‘æƒ³åˆ°æˆ‘å¯ä»¥å°†è¿™ç§ç›´è§‰ç”¨ä»£ç è¡¨è¾¾å‡ºæ¥ã€‚</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/dd6982142d706b2b3bd437642fb8808e.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*Mn-fVEpGReyAzUdtouKv9A.png"/></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">source: <a class="ae ka" href="https://xkcd.com/2173/" rel="noopener ugc nofollow" target="_blank">https://xkcd.com/2173/</a></figcaption></figure><p id="20ae" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™æ˜¯æˆ‘ä»¬å°†è¦å®æ–½çš„è§£å†³æ–¹æ¡ˆçš„æ¦‚è¦:</p><ol class=""><li id="589b" class="lx ly if je b jf jg jj jk jn lz jr ma jv mb jz mc md me mf dt translated">æ‰¾åˆ°æ‰€æœ‰æˆ‘æƒ³å»çš„åœ°æ–¹çš„ä¸­å¿ƒç‚¹ã€‚</li><li id="b3bb" class="lx ly if je b jf mg jj mh jn mi jr mj jv mk jz mc md me mf dt translated">æŠŠæˆ‘æƒ³å»çš„åœ°æ–¹æŒ‰ç…§å®ƒä»¬ç¦»ä¸­å¿ƒçš„è§’åº¦æ’åºã€‚</li><li id="b19d" class="lx ly if je b jf mg jj mh jn mi jr mj jv mk jz mc md me mf dt translated">æ‰§è¡Œ<a class="ae ka" href="https://en.wikipedia.org/wiki/Greedy_algorithm" rel="noopener ugc nofollow" target="_blank">è´ªå©ª</a> <a class="ae ka" href="https://en.wikipedia.org/wiki/Local_search_(optimization)" rel="noopener ugc nofollow" target="_blank">å±€éƒ¨æœç´¢</a>ä»¥ä¼˜åŒ–è¯¥è§’åº¦è·¯çº¿ã€‚</li></ol><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ml"><img src="../Images/dc2617a8eb078c75ed187490a7abbe6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rEIRTpPUHAj9qd-r_58GHw.png"/></div></div></figure><h1 id="9c2c" class="kn ko if bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">å¥½äº†ï¼Œè®©æˆ‘ä»¬æŠŠäº‹æƒ…åšå®Œå§</h1><h2 id="5463" class="mm ko if bd kp mn mo mp kt mq mr ms kx jn mt mu lb jr mv mw lf jv mx my lj mz dt translated">1.å¥ å®šåŸºç¡€</h2><p id="f677" class="pw-post-body-paragraph jc jd if je b jf ll jh ji jj lm jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz hn dt translated">æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹è½¯ä»¶åŒ…:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="ce09" class="mm ko if nb b fv nf ng l nh ni">import numpy as np<br/>import math</span></pre><p id="1bc3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¹¶å®šä¹‰æˆ‘ä»¬å°†ä½¿ç”¨çš„ä»¥ä¸‹<code class="eh nj nk nl nb b">GeoPoint</code>ç±»:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="4cf0" class="mm ko if nb b fv nf ng l nh ni">class <strong class="nb ig">GeoPoint</strong>:<br/>    def __init__(self, lng: float, lat: float):<br/>        # Why 5 digits? It's 1 m. accuracy according to  <br/>        # <a class="ae ka" href="https://en.wikipedia.org/wiki/Decimal_degrees" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Decimal_degrees</a><br/>        self.lng = round(lng, 5)<br/>        self.lat = round(lat, 5)<br/>        <br/>    def __repr__(self):<br/>        # Copy-pastable format for most map applications<br/>        return f"[{self.lng}, {self.lat}]"</span></pre><p id="89d2" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬å°†å‡è®¾æˆ‘ä»¬æƒ³å»çš„åœ°æ–¹çš„åˆ—è¡¨ä¿å­˜åœ¨<code class="eh nj nk nl nb b">geo_points: [GeoPoint]</code>ä¸­(åœ¨ Python 3.7 ä¸­ï¼Œè¿™æ„å‘³ç€<code class="eh nj nk nl nb b">geo_points</code>æ˜¯<code class="eh nj nk nl nb b">GeoPoint</code>å®ä¾‹çš„<code class="eh nj nk nl nb b">list</code>)ã€‚</p><h2 id="29f6" class="mm ko if bd kp mn mo mp kt mq mr ms kx jn mt mu lb jr mv mw lf jv mx my lj mz dt translated">2.å¯»æ‰¾è§’åº¦è·¯çº¿</h2><p id="a84b" class="pw-post-body-paragraph jc jd if je b jf ll jh ji jj lm jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz hn dt translated">æˆ‘ä»¬é¦–å…ˆè¦æ‰¾åˆ°ä¸­å¿ƒ:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="57b6" class="mm ko if nb b fv nf ng l nh ni">def <strong class="nb ig">get_geo_point_of_center</strong>(geo_points: [GeoPoint]) -&gt; GeoPoint:<br/>    lng_list, lat_list = list(zip(*[[g.lng, g.lat] <br/>                                    for g in geo_points]))<br/>    lng_center, lat_center = np.mean(np.array([lng_list, lat_list]),<br/>                                     axis=1)<br/>    return GeoPoint(lng_center, lat_center)</span></pre><p id="bc21" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç„¶åè®¡ç®—ç¦»ä¸­å¿ƒçš„è§’åº¦:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="734d" class="mm ko if nb b fv nf ng l nh ni">def <strong class="nb ig">get_angle_from_reference_geo_point_in_deg</strong>(<br/>    reference_geo_point: GeoPoint, <br/>    other_geo_point: GeoPoint) -&gt; float:</span><span id="8638" class="mm ko if nb b fv nm ng l nh ni">    x = other_geo_point.lng - reference_geo_point.lng<br/>    y = other_geo_point.lat - reference_geo_point.lat<br/>    angle_from_reference_in_deg = math.degrees(math.atan2(y, x))</span><span id="6120" class="mm ko if nb b fv nm ng l nh ni">    return angle_from_reference_in_deg</span></pre><p id="f808" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æœ€åï¼Œä½¿ç”¨å†…ç½®çš„<code class="eh nj nk nl nb b">sorted</code>å‡½æ•°å®Œæˆï¼Œå¾—åˆ°è§’åº¦è·¯çº¿:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="bfb7" class="mm ko if nb b fv nf ng l nh ni">def <strong class="nb ig">get_angular_route_idxs</strong>(geo_points: [GeoPoint]) -&gt; [int]:<br/>    center = get_geo_point_of_center(geo_points)<br/>    route_idxs = sorted(<br/>        list(range(len(geo_points))), <br/>        key=lambda i: <br/>        get_angle_from_reference_geo_point_in_deg(<br/>            center, geo_points[i]),<br/>        reverse=True)<br/>    return route_idxs</span></pre><p id="2916" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig">æ³¨æ„:</strong>æˆ‘ä»¬æƒ³ä¿ç•™è§’åº¦è·¯çº¿çš„<strong class="je ig">ç´¢å¼•</strong>ã€‚</p><h2 id="1ca9" class="mm ko if bd kp mn mo mp kt mq mr ms kx jn mt mu lb jr mv mw lf jv mx my lj mz dt translated">2.5.ä¸€äº›å¯è§†åŒ–æŠ€å·§</h2><p id="1076" class="pw-post-body-paragraph jc jd if je b jf ll jh ji jj lm jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz hn dt translated">å¦‚æœä½ ä¸æƒ³åƒæˆ‘ä¸Šé¢â€œæ‡’æ´‹æ´‹åœ°â€åšçš„é‚£æ ·ï¼Œåœ¨ä¸€å¼ <a class="ae ka" href="http://s2map.com" rel="noopener ugc nofollow" target="_blank"> s2map </a>ä¸Šæ‰‹åŠ¨ç»˜åˆ¶ä½ çš„è·¯çº¿ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä½¿ç”¨å¥‡å¦™çš„<code class="eh nj nk nl nb b"><a class="ae ka" href="https://geojson.org/" rel="noopener ugc nofollow" target="_blank">geojson</a></code>æ ¼å¼çš„åŸºæœ¬æŠ€å·§ï¼Œä»¥åŠæ›´å¥‡å¦™çš„<code class="eh nj nk nl nb b"><a class="ae ka" href="http://geojson.io/#map=2/20.0/0.0" rel="noopener ugc nofollow" target="_blank">geojson.io</a></code>å¯è§†åŒ–æœåŠ¡å’Œ<a class="ae ka" href="https://pypi.org/project/geojsonio/" rel="noopener ugc nofollow" target="_blank">ä¼´éšåŒ…</a>ã€‚</p><p id="5bfc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸ºäº†<strong class="je ig">è€Œä¸æ˜¯</strong>æŠŠå®ƒå˜æˆä¸€ä¸ª<code class="eh nj nk nl nb b">geojson</code>æ•™ç¨‹ï¼Œæˆ‘ä¼šæŠŠå®ƒä»¥æœ€ç»ˆçš„å½¢å¼æ³„éœ²å‡ºæ¥ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ„‰å¿«åœ°å¤åˆ¶ç²˜è´´å®ƒ:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="4ad5" class="mm ko if nb b fv nf ng l nh ni">from geojson import LineString, Point, Feature, FeatureCollection</span><span id="57f6" class="mm ko if nb b fv nm ng l nh ni">def <strong class="nb ig">visualize</strong>(route_idxs: [int], geo_points: [GeoPoint]):<br/>    lng_lat_list = [tuple([geo_points[i].lng, geo_points[i].lat])<br/>                    for i in route_idxs]<br/>    route = Feature(geometry=LineString(lng_lat_list),<br/>                    properties={"name": "This is our route",<br/>                                "stroke": "#8B0000"})<br/>    places = [Feature(geometry=Point(lng_lat), <br/>                      properties={"name": f"Place {route_idxs[i]}",<br/>                                  "symbol": str(i)[-1],<br/>                                  "marker-color": "#00008B"})<br/>              for i, lng_lat in enumerate(lng_lat_list)]</span><span id="a486" class="mm ko if nb b fv nm ng l nh ni">    features = [route] + places<br/>    feature_collection = FeatureCollection(features)<br/>    <br/>    return feature_collection</span></pre><p id="558a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨<code class="eh nj nk nl nb b"> jupyter notebook</code>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›è¡Œè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ª geojson.io é€‰é¡¹å¡ï¼Œæ˜¾ç¤ºæ‚¨çš„å¯è§†åŒ–:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="f82b" class="mm ko if nb b fv nf ng l nh ni">import geojsonio<br/>import json</span><span id="b47c" class="mm ko if nb b fv nm ng l nh ni">route_idxs <strong class="nb ig">= get_angular_route_idxs</strong>(geo_points)<br/>feature_collection = <strong class="nb ig">visualize</strong>(route_idxs, geo_points)<br/>geojsonio.display(json.dumps(feature_collection));</span></pre><p id="48be" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">é¢„æœŸç»“æœ:</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nn"><img src="../Images/f742f5fa8dc290bdaec2fa2d7fc8847d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIznjKdArdHr5TPu-9BR8A.png"/></div></div></figure><h2 id="4c15" class="mm ko if bd kp mn mo mp kt mq mr ms kx jn mt mu lb jr mv mw lf jv mx my lj mz dt translated">3.ä½¿æœ€ä½³åŒ–</h2><p id="8d21" class="pw-post-body-paragraph jc jd if je b jf ll jh ji jj lm jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz hn dt translated">åœ¨æˆ‘ä»¬çš„è´ªå©ªå±€éƒ¨æœç´¢ä¸­ï¼Œæˆ‘ä»¬å°†:<br/> -æ‰§è¡Œå›ºå®šæ¬¡æ•°çš„è¿­ä»£ã€‚<br/> -åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å°†:<br/> *æ”¹å˜åˆ—è¡¨ä¸­ä¸€ä¸ªéšæœºä½ç½®çš„ç´¢å¼•ï¼Œ<br/> *å¦‚æœæ–°è·¯çº¿æ›´çŸ­ï¼Œåˆ™ä¿æŒè¿™ç§æ”¹å˜ã€‚</p><p id="7bf5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸ºäº†èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†å‡è®¾æˆ‘ä»¬æŒæœ‰ä¸€ä¸ª<code class="eh nj nk nl nb b">distances_array</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code class="eh nj nk nl nb b">numpy</code>æ•°ç»„ï¼Œä¿å­˜ä½ç½®<code class="eh nj nk nl nb b">i,j</code>å¤„<code class="eh nj nk nl nb b">i</code>å’Œ<code class="eh nj nk nl nb b">j</code>ä¹‹é—´çš„è·ç¦»ã€‚</p><p id="6d36" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½¿ç”¨è¿™ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ç»™å®šè·¯çº¿çš„é•¿åº¦:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="18b3" class="mm ko if nb b fv nf ng l nh ni">def <strong class="nb ig">get_route_len</strong>(distances_array: np.array, route_idxs):<br/>    route_len = sum([distances_array[i1][i2]<br/>                     for i1, i2 in zip(route_idxs[:-1],<br/>                                       route_idxs[1:])])<br/>    return route_len</span></pre><p id="b906" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æœ€åï¼Œæˆ‘ä»¬çš„ç®€å•ä¼˜åŒ–å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="0613" class="mm ko if nb b fv nf ng l nh ni">import random<br/>random_seed = 42<br/>random.seed(random_seed)</span><span id="d780" class="mm ko if nb b fv nm ng l nh ni">def <strong class="nb ig">optimize_route</strong>(distances_array: np.array, <br/>                   route_idxs: [int], n_iter: int) -&gt; [int]:<br/>    prev_cost = <strong class="nb ig">get_route_len</strong>(distances_array, route_idxs)<br/>    <br/>    all_idxs = list(range(len(route_idxs)))<br/>    for _ in range(n_iter):    <br/>        i1, i2 = random.sample(all_idxs, 2)<br/>        route_idxs[i2], route_idxs[i1] = (route_idxs[i1],<br/>                                          route_idxs[i2])<br/>        new_cost = <strong class="nb ig">get_route_len</strong>(distances_array, route_idxs)<br/>        if new_cost &lt; prev_cost:<br/>            prev_cost = new_cost<br/>        else:<br/>            route_idxs[i2], route_idxs[i1] = (route_idxs[i1],<br/>                                              route_idxs[i2])<br/>    return route_idxs</span></pre><p id="7190" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰:</p><pre class="kc kd ke kf fq na nb nc nd aw ne dt"><span id="e30e" class="mm ko if nb b fv nf ng l nh ni">def <strong class="nb ig">plot_best_route</strong>(geo_points: [GeoPoint], <br/>                    distances_array: np.array, n_iter: int) -&gt; None:<br/>    route_idxs = <strong class="nb ig">get_angular_route</strong>(geo_points)<br/>    route_idxs = <strong class="nb ig">optimize_route</strong>(distances_array, route_idxs, n_iter)<br/>    feature_collection = <strong class="nb ig">visualize</strong>(route_idxs, geo_points)<br/>    geojsonio.<strong class="nb ig">display</strong>(json.dumps(feature_collection));</span></pre><p id="adfa" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">é¢„æœŸç»“æœ:</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff no"><img src="../Images/a526dd224e7c846dd7e9b69fc574e436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vfBVzWujYG59fhQRrLGEAQ.png"/></div></div></figure><p id="7b6d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ‚¨å¸Œæœ›åœ¨ä¸€ä¸ªåœ°æ–¹çœ‹åˆ°æ‰€æœ‰ä»£ç å—ï¼Ÿè¿™é‡Œæ¬¢è¿ä½ å»<a class="ae ka" href="https://github.com/DalyaG/CodeSnippetsForPosterity/blob/master/YATS_YetAnotherTSPSolution/YetAnotherTSPSolution.ipynb" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><h1 id="5650" class="kn ko if bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">å®Œäº‹äº†å—ï¼Ÿ</h1><p id="bf03" class="pw-post-body-paragraph jc jd if je b jf ll jh ji jj lm jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz hn dt translated">åœ¨æˆ‘å‡†å¤‡çš„<a class="ae ka" href="https://github.com/DalyaG/CodeSnippetsForPosterity/blob/master/YATS_YetAnotherTSPSolution/YetAnotherTSPSolution.ipynb" rel="noopener ugc nofollow" target="_blank"> jupyter ç¬”è®°æœ¬</a>ä¸­ï¼Œé€šè¿‡è¿™ç¯‡æ–‡ç« ä¸­çš„å®Œæ•´ç®¡é“ï¼Œä½ è¿˜å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªæ›´å¤§è¾“å…¥çš„ç©å…·ç¤ºä¾‹ï¼Œå¹¶çœ‹åˆ°åŒæ ·å¯¹äº 50 åˆ†ï¼Œè¿™æ˜¯ä¸å¯è¡Œçš„ï¼Œä»¥è§£å†³æœ€ä¼˜ï¼Œä½ å¯ä»¥åœ¨ä¸åˆ° 1 ç§’é’Ÿå†…å¾—åˆ°ï¼Œçœ‹èµ·æ¥å¹¶ä¸åï¼Œå°±åƒè¿™æ ·:</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff np"><img src="../Images/dfd7e227c8ee4ddc907508782bca07e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvmJGugrwoBZH_O0GDDXig.png"/></div></div></figure><p id="596f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¸Œæœ›ä½ å–œæ¬¢å’Œæˆ‘ä¸€èµ·èµ°è¿™æ®µæ—…ç¨‹ï¼Œå¹¶åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨å†…å…³æ³¨æ›´å¤šçš„ç®—æ³•å¸–å­ï¼Œ:D</p></div></div>    
</body>
</html>