# ç”¨ Docker å¼€å‘ Node.js çš„æ›´å¥½æ–¹æ³•

> åŸæ–‡ï¼š<https://medium.com/hackernoon/a-better-way-to-develop-node-js-with-docker-cd29d3a0093>

## å¹¶ä¿æŒæ‚¨çš„çƒ­ä»£ç é‡è½½

![](img/f7926a02cb09cdfd63b65bd5d9f92c89.png)

Licensed from Adobe Stock Photo

æœ€è¿‘çœ‹åˆ°å¾ˆå¤šæ–‡ç« å»ºè®®å¦‚ä½•ä½¿ç”¨ Docker è¿›è¡Œå¼€å‘ã€‚æˆ‘è¿˜æ²¡è§è¿‡èƒ½æ­£ç¡®åšåˆ°çš„ã€‚

æ˜¾ç„¶ï¼Œæ­£ç¡®åœ°è¯´ï¼Œæ˜¯ä¸»è§‚çš„ï¼Œä½†æ˜¯æˆ‘æƒ³æ¯”è¾ƒä¸€ä¸‹å…¸å‹çš„æ™ºæ…§å’Œæˆ‘é€šå¸¸å¤„ç†é—®é¢˜çš„æ–¹å¼ã€‚

# ä¼ ç»Ÿæ™ºæ…§

åœ¨å¾ˆå¤šæ•™ç¨‹ä¸­ï¼Œé¦–å…ˆä»‹ç»çš„å°±æ˜¯ Dockerfileã€‚

> åœ¨ä»»ä½• docker åŒ–åº”ç”¨çš„åŸºç¡€ä¸Šï¼Œä½ éƒ½ä¼šå‘ç°ä¸€ä¸ª`[Dockerfile](https://docs.docker.com/engine/reference/builder/) â€”` [https://blog . codeship . com/using-docker-compose-for-nodejs-development/](https://blog.codeship.com/using-docker-compose-for-nodejs-development/)

æ˜¾ç„¶ï¼Œè¿™æ˜¯åŸºç¡€ã€‚

è°·æ­Œä¸Šçš„å‰å‡ ä¸ªç»“æœéƒ½è¡¨æ˜ï¼Œä½ é¦–å…ˆéœ€è¦çš„æ˜¯ä¸€ä¸ª Dockerfile æ–‡ä»¶ã€‚

æ¯•ç«Ÿï¼Œä¸åˆ›å»º Docker æ–‡ä»¶ï¼Œæ€ä¹ˆèƒ½æœ‰ Docker ç¯å¢ƒå‘¢ï¼Ÿ

æˆ‘åœ¨è¿™é‡Œå‘Šè¯‰å¤§å®¶ï¼Œè™½ç„¶è¿™å¯¹äºç”Ÿäº§æ¥è¯´æ˜¯æ­£ç¡®çš„ï¼Œä½†å¯¹äºå¼€å‘æ¥è¯´å´æ˜¯é”™è¯¯çš„æ–¹æ³•ã€‚æ‚¨ä¸éœ€è¦åˆ›å»ºè‡ªå·±çš„ã€‚

docker æ–‡ä»¶æ˜¯æ‰“åŒ…åº”ç”¨ç¨‹åºçš„ä¸€ç§æ–¹å¼ã€‚æ‚¨ä¸éœ€è¦æ‰“åŒ…æ‚¨çš„åº”ç”¨ç¨‹åºè¿›è¡Œå¼€å‘ï¼Œè€å®è¯´ï¼Œæ‚¨çœŸçš„ä¸åº”è¯¥è¿™æ ·åšã€‚

å¼€å‘å’Œç”Ÿäº§ä¸æ˜¯åŒä¸€ä¸ªç¯å¢ƒã€‚

å½“ä½ åœ¨ MacBook ä¸Šå¼€å‘æ—¶ï¼Œä½ å®‰è£…çš„å·¥å…·ä¸ä½ åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨çš„ä¸åŒã€‚ä»…ä»…å› ä¸ºâ€œå®ƒåœ¨ä»»ä½•åœ°æ–¹éƒ½ä»¥åŒæ ·çš„æ–¹å¼è¿è¡Œâ€å¹¶ä¸æ„å‘³ç€å®ƒåº”è¯¥å¦‚æ­¤ã€‚

æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨å¼€å‘ä¸­çš„è¿è¡Œæ–¹å¼æœ‰æ‰€ä¸åŒã€‚

åœ¨ä¸€ä¸ªéœ€è¦çµæ´»æ€§å’Œå¯å¡‘æ€§çš„æ—¶ä»£å¯¹å®ƒè¿›è¡Œæ‰“åŒ…ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¸å¤šå·¥ç¨‹å¸ˆå¾—å‡º Docker ä¸é€‚åˆå¼€å‘çš„ç»“è®ºã€‚

ä¾‹å¦‚ï¼Œå½“ä¾èµ–å…³ç³»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‚¨éœ€è¦æ„å»ºæ–°çš„å®¹å™¨ï¼Œä»è€Œå¤±å»äº†å¼€å‘çš„çµæ´»æ€§ã€‚

å½“ç„¶ï¼Œæ‚¨å¯ä»¥åœ¨å®¹å™¨ä¸­æ‰§è¡Œå¹¶æ‰§è¡Œä¸€äº›å‘½ä»¤ï¼Œå®‰è£…ä¸€äº›åº“ï¼Œä½†æ˜¯åœ¨è¿™ä¸€ç‚¹ä¸ŠçœŸçš„å¾ˆå®¹æ˜“å—ï¼Ÿ

ç°åœ¨ï¼Œä¸Šé¢çš„ä¸€äº›æ–‡ç« æ¯”å…¶ä»–æ–‡ç« æ›´æ­£ç¡®ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä½¿ç”¨ Dockerfile è¿›è¡Œå¼€å‘ï¼Œæ‚¨å¯èƒ½å·²ç»èµ°å¾—å¤ªè¿œäº†ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œä½ ä¼šæƒ³è¦ä¸€ä¸ªï¼Œä½†å¯èƒ½ä¸æ˜¯ä»¥ä½ æƒ³çš„æ–¹å¼ã€‚

> **æç¤º**:å¦‚æœä½ çš„ docker æ–‡ä»¶åŒ…å«ä¸€ä¸ª`npm install`ï¼Œé‚£ä½ å°±å¤ªè¿‡åˆ†äº†ã€‚

# docker-compose æ„å»ºå™¨æ¨¡å¼

å…ˆè¯´ä¸€ä¸‹ Docker *æ˜¯ä»€ä¹ˆ*ã€‚

Docker æ˜¯ä¸€ç§æ‰“åŒ…ä»£ç çš„æ–¹å¼ã€‚è¿™æ˜¯ä½¿ç”¨ Docker çš„å…¸å‹*ä¸Šä¸‹æ–‡*ã€‚

Docker ä¹Ÿæ˜¯ä¸€ç§åˆ›å»ºèƒ½å¤Ÿæ‰§è¡Œç‰¹å®šç±»å‹åº”ç”¨ç¨‹åºçš„éš”ç¦»ç¯å¢ƒçš„æ–¹æ³•ã€‚

Docker å…è®¸æ‚¨æ‰“åŒ…èƒ½å¤Ÿè¿è¡Œæ‚¨çš„ä»£ç çš„ç¯å¢ƒã€‚

å½“æ‚¨ä½¿ç”¨ Docker è¿›è¡Œç”Ÿäº§æ—¶ï¼Œæ‚¨ä½¿ç”¨çš„æ˜¯æ‚¨èƒ½åˆ¶é€ çš„æœ€ä¸“ä¸šçš„ Docker å®¹å™¨ã€‚å®ƒä»¬æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºå®šåˆ¶å’Œä¸“é—¨æ„å»ºçš„ï¼Œä»¥æ‚¨æ„å»ºåº”ç”¨ç¨‹åºçš„æ–¹å¼æ‰“åŒ…ã€‚ä¸ºæ­¤ï¼Œåˆ›å»º docker æ–‡ä»¶æ˜¯æœ‰æ„ä¹‰çš„ã€‚

å½“ä½ ä¸ºå¼€å‘è€Œè®¾ç½®ä½ çš„è®¡ç®—æœºæ—¶ï¼Œé‚£ä¸æ˜¯ä½ æ‰€åšçš„ã€‚ç›¸åï¼Œæ‚¨éœ€è¦å®‰è£…å¼€å‘æ‰€éœ€çš„å·¥å…·ã€‚ä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ªä½ çš„ä»£ç å¯ä»¥è¿è¡Œçš„ç¯å¢ƒã€‚

è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨æ›´é€šç”¨çš„ docker æ–‡ä»¶ã€‚é€šå¸¸ï¼Œå¼€å‘æ‰€éœ€çš„è¿™äº›é€šç”¨ docker æ–‡ä»¶å·²ç»å­˜åœ¨ã€‚

ä¾‹å¦‚ï¼Œå¼€å‘ Node.js åº”ç”¨ç¨‹åºæ—¶ï¼Œéœ€è¦åœ¨æœºå™¨ä¸Šå®‰è£…`node`ã€‚å°±æ˜¯è¿™æ ·ã€‚

ä½ ä¸éœ€è¦ alpine linuxã€‚æ‚¨ä¸éœ€è¦å°† node_modules æ‰“åŒ…æˆä¸å¯å˜çš„ç‰ˆæœ¬ã€‚ä½ ä¸éœ€è¦å°å®¹å™¨æ¥æ‰§è¡Œä»¥åšå‡ºé‡å¤§æ”¹å˜ã€‚ä½ åªéœ€è¦èƒ½å¤Ÿæ‰§è¡Œ`node`å’Œ`npm`ã€‚

å› æ­¤ï¼Œåœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ä½ æ‰€éœ€è¦çš„ï¼Œè¿™æ„å‘³ç€ Docker Hub ä¸Šçš„å®˜æ–¹`node`æ˜ åƒä¼šåšå¾—å¾ˆå¥½ã€‚

äº‹ä¸å®œè¿Ÿï¼Œæˆ‘ç”¨ Docker å¼€å‘çš„æ–¹æ³•ã€‚

åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ package è¿›è¡Œå¼€å‘å’Œç”Ÿäº§ã€‚è®©æˆ‘ä»¬ç»§ç»­å‰è¿›ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå†æ¥å†å‰ã€‚

æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå› ä¸ºçƒ­æ¨¡å—é‡è½½å¯¹äºé«˜æ•ˆå¼€å‘ React åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚

## ç¬¬ä¸€æ­¥

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª`docker-compose`æ–‡ä»¶ã€‚åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒã€‚çœ‹èµ·æ¥æˆ‘ä»¬æ­£åœ¨åˆ¶ä½œä¸€ä¸ª`node`åº”ç”¨ç¨‹åºï¼Œè¿™æ„å‘³ç€å®˜æ–¹çš„`node`å›¾åƒå¯èƒ½æ˜¯ä¸€ä¸ªå®‰å…¨çš„èµŒæ³¨ã€‚

è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–‡ä»¶`docker-compose.yml`:

```
version: '3'services: dev:
    image: node:11
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æˆ‘ä»¬çš„ä»£ç åœ¨ç¯å¢ƒä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›å®ƒè¢«çƒ˜ç„™åˆ°æ˜ åƒä¸­ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªè¿›è¡Œå¼€å‘ï¼Œå½“æˆ‘ä»¬çš„æ–‡ä»¶æ”¹å˜æ—¶ï¼Œå®¹å™¨ä¸­çš„æ–‡ä»¶ä¹Ÿéœ€è¦æ”¹å˜ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä½“ç§¯ã€‚æˆ‘ä»¬å°†æŠŠå½“å‰ç›®å½•`.`æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„`/usr/src/service`ã€‚æˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰ docker æˆ‘ä»¬çš„â€œå·¥ä½œç›®å½•â€åœ¨å“ªé‡Œã€‚æ„æ€æ˜¯â€”â€”æˆ‘ä»¬æŠŠä»£ç æ”¾åœ¨å“ªä¸ªç›®å½•ä¸‹äº†ï¼Ÿ

```
version: '3'services: dev:
    image: node:11
    **volumes:
      - .:/usr/src/service
    working_dir: /usr/src/service**
```

ç°åœ¨ï¼Œæ¯æ¬¡æˆ‘ä»¬åœ¨æœ¬åœ°æœºå™¨ä¸Šè¿›è¡Œæ›´æ”¹æ—¶ï¼Œç›¸åŒçš„æ–‡ä»¶æ›´æ”¹éƒ½ä¼šåæ˜ åœ¨`/usr/src/service`ä¸­ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œå‘½ä»¤`npm run dev`ã€‚è¿™å¾ˆå®¹æ˜“ç”¨`command`å®Œæˆã€‚æˆ‘ä»¬è¿˜æƒ³åœ¨ç«¯å£`1234`ä¸Šæœ¬åœ°è®¿é—®å®ƒã€‚

æœ€åï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œçƒ­æ¨¡å—é‡æ–°è£…è½½åŒ…å‘ç”Ÿåœ¨ä¸€ä¸ªéšæœºç«¯å£ä¸Šï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦æ˜ å°„ HMR ç«¯å£ã€‚

ä¿®æ”¹`package.json`ä¸­çš„`dev`è„šæœ¬ï¼Œä»¥åŒ…å«é€‰é¡¹`--hmr-port=1235`ã€‚

```
"dev": "npm run generate-imported-components && parcel app/index.html **--hmr-port 1235**",
```

å‡†å¤‡å°±ç»ªåï¼Œè®©æˆ‘ä»¬æ›´æ–° Docker æ–‡ä»¶ï¼Œå°†æœ¬åœ°æœºå™¨ä¸Šçš„ç«¯å£æ˜ å°„åˆ°å®¹å™¨ä¸Šçš„ç›¸åŒç«¯å£ã€‚

```
version: '3'services: dev:
    image: node:11
    volumes:
      - .:/usr/src/service
    working_dir: /usr/src/service **command: npm run dev
    ports:
      - 1234:1234
      - 1235:1235**
```

å¦‚æœä½ å·²ç»åšäº†è¶³å¤Ÿçš„èŠ‚ç‚¹å¼€å‘ï¼Œä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬æœ‰ä¸€ä¸ªé—®é¢˜ã€‚ä½ ä¸èƒ½ä¸å®‰è£…ä¾èµ–é¡¹å°±è¿è¡Œä¸€ä¸ªèŠ‚ç‚¹åº”ç”¨ã€‚

æ­¤å¤–ï¼Œæ‚¨ä¸èƒ½åªåœ¨ Mac æˆ– Windows ä¸Šæœ¬åœ°å®‰è£…èŠ‚ç‚¹æ¨¡å—ï¼Œç„¶åæœŸæœ›å®ƒä»¬åœ¨ linux å®¹å™¨ä¸Šå·¥ä½œã€‚

å½“æ‚¨è¿è¡Œä¸€ä¸ªæ„å»ºæ—¶ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåº“æ˜¯æœ¬åœ°ç¼–è¯‘çš„ï¼Œäº§ç”Ÿçš„å·¥ä»¶åªèƒ½åœ¨æ„å»ºå®ƒçš„æ“ä½œç³»ç»Ÿä¸Šå·¥ä½œï¼

ä½œä¸ºç¬¬ä¸€æ¬¡å°è¯•ï¼Œä½ å¯èƒ½æƒ³åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­æŠŠ`npm install`å’Œ`npm run dev`é“¾æ¥èµ·æ¥ï¼Œå½“ç„¶è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è¿™å°†è¦æ±‚æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨å®¹å™¨å¯åŠ¨å¼€å‘æ¨¡å¼æ—¶è¿è¡Œä¸€æ¬¡å®‰è£…ã€‚

æ­¤å¤–ï¼Œæœ‰äº›æœåŠ¡é™¤äº†éœ€è¦å®‰è£…ä¹‹å¤–ï¼Œè¿˜å¯èƒ½éœ€è¦ä¸€ä¸ªæ„å»ºæ­¥éª¤ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¼€å‘å®¢æˆ·ç«¯ä¸éœ€è¦è¿™æ ·åšï¼Œå› ä¸º parcel æˆ– nodemon ä¼šå¤„ç†å®ƒï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯åœ¨è¿‡å»ä¸€å‘¨ç”¨æœ€æ–°çš„æŠ€æœ¯æ„å»ºçš„ã€‚

å‡ºäºæ•™è‚²ç›®çš„ï¼Œé“¾æ¥å‘½ä»¤çš„æ–¹å¼æ˜¯ä½¿ç”¨`bash`æˆ–`ash`æ¥æ‰§è¡Œå‘½ä»¤ã€‚å¦‚æœä½ å°è¯•

```
command: npm install && npm run dev
```

ä½ ä¼šçŸ¥é“é‚£æ˜¯è¡Œä¸é€šçš„ã€‚ç›¸åï¼Œä½ å¯ä»¥ç”¨ã€‚

```
command: bash -c "npm install && npm run dev"
```

è¿™å®é™…ä¸Šæ˜¯å¯è¡Œçš„ï¼Œä½†ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚

è¿™å°±æŠŠæˆ‘ä»¬å¸¦åˆ°äº†ç¬¬äºŒæ­¥ã€‚

## ç¬¬äºŒæ­¥

è®©æˆ‘ä»¬åˆ›å»ºå¦ä¸€ä¸ª docker-compose æ–‡ä»¶ï¼Œè¿™æ¬¡å‘½åä¸º`docker-compose.builder.yml`ã€‚

è¿™æ¬¡æˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨`version: 2`æ¥åˆ©ç”¨`docker-compose`ä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œè¿™ä¸ªç‰¹æ€§åœ¨ç‰ˆæœ¬ 3 è§„èŒƒä¸­æ˜¯ä¸å¯ç”¨çš„ã€‚

ç¬¬ 3 ç‰ˆæ¯”ç¬¬ 2 ç‰ˆæ›´é€‚åˆåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ï¼Œç¬¬ 2 ç‰ˆæœ‰æ›´å¤šå¼€å‘å‹å¥½çš„ç‰¹æ€§ã€‚

> æ›´æ–°:V3 ç°åœ¨ä¹Ÿä»¥ç¨å¾®ä¸åŒçš„è¯­æ³•æ”¯æŒè¿™ä¸€ç‚¹â€”â€”å¸Œæœ›æœ‰ä¸€ä¸ª PR æ¥æ›´æ–°å®ƒ:)è¿™é‡Œæ˜¯æ–‡æ¡£:[https://docs . docker . com/compose/compose-file/# extension-fields](https://docs.docker.com/compose/compose-file/#extension-fields)

æˆ‘ä»¬æƒ³åœ¨`docker-compose.builder.yml`ä¸­å®šä¹‰çš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä¸€ä¸ªåŸºç¡€å›¾åƒã€‚

```
version: '2'services: base:
    image: node:11
    volumes:
      - .:/usr/src/service
    working_dir: /usr/src/service
```

è¿™çœ‹èµ·æ¥åº”è¯¥å¾ˆç†Ÿæ‚‰ã€‚è¿™ä¸æˆ‘ä»¬åœ¨`docker-compose.yml`æ–‡ä»¶ä¸­ä½¿ç”¨çš„åŸºæ•°ç›¸åŒã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰©å±•åŸºç¡€æ¥æ‰§è¡Œä¸€å¤§å †ä¸åŒçš„å‘½ä»¤ã€‚ä¾‹å¦‚:

```
version: '2'services: base:
    image: node:11
    volumes:
      - .:/usr/src/service/
    working_dir: /usr/src/service/ **install:
    extends:
      service: base
    command: npm i** **build:
    extends:
      service: base
    command: npm run build** **create-bundles:
    extends:
      service: base
    command: npm run create-bundles**
```

ç°åœ¨ï¼Œè¦ä½¿ç”¨ä¸æˆ‘ä»¬åœ¨`docker-compose.yml`ä¸­çš„å¼€å‘æœåŠ¡ç›¸åŒ¹é…çš„`node:11`æ˜ åƒæ¥å®‰è£…ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ:

```
docker-compose -f docker-compose.builder.yml run --rm install
```

å®‰è£…æ‰€éœ€çš„äºŒè¿›åˆ¶ç‰ˆæœ¬ã€‚

> **äº²æç¤º:**è¯šç„¶ï¼Œ`docker-compose -f docker-compose.builder.yml run â€” rm install`ï¼Œå¹¶ä¸ä¼šçœŸçš„â€œè„±å£è€Œå‡ºâ€å§ï¼Ÿæˆ‘é€šå¸¸æŠŠå®ƒæ”¾åœ¨ Makefile ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥è¿è¡Œ`make install`ç­‰ã€‚

è¿è¡Œå®‰è£…ç¨‹åºåï¼Œ`docker-compose up`å°†æ‰“å¼€æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒï¼Œå®ƒçš„å·¥ä½œæ–¹å¼å’Œåœ¨æœ¬åœ°æœºå™¨ä¸Šå®Œå…¨ä¸€æ ·ã€‚

```
âœ  docker-compose up
Creating stream-all-the-things_dev_1 ... done
Attaching to stream-all-the-things_dev_1
dev_1  |
dev_1  | > stream-all-the-things@1.0.0 dev /usr/src/service
dev_1  | > npm run generate-imported-components && parcel app/index.html
dev_1  |
dev_1  |
dev_1  | > stream-all-the-things@1.0.0 generate-imported-components /usr/src/service
dev_1  | > imported-components app app/imported.js
dev_1  |
dev_1  | scanning app for imports...
dev_1  | 1 imports found, saving to app/imported.js
dev_1  | Server running at [http://localhost:1234](http://localhost:1234)
```

å½“æˆ‘ä»¬è¿›è¡Œæ›´æ”¹æ—¶ï¼Œçƒ­ä»£ç é‡è½½ä¼šåƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼

![](img/1b19a1a1edf932286d8a10c060369f5e.png)

å…¨éƒ½æ²¡æœ‰æ–‡æ¡£ï¼

## å¥–é‡‘

æˆ‘åªæ˜¯æƒ³å¿«é€Ÿæ·»åŠ ä¸€ä¸ª Makefile ç¤ºä¾‹ï¼Œä½¿å‘½ä»¤æ›´å®¹æ˜“è®°å¿†å’Œä½¿ç”¨ã€‚

åˆ›å»ºä¸€ä¸ªåä¸º`Makefile`çš„æ–‡ä»¶:

```
install:
 docker-compose -f docker-compose.builder.yml run --rm installdev:
 docker-compose up
```

Makefiles ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼Œä½†æ˜¯ [base:
image: node:11
volumes:
**- nodemodules:/usr/src/service/node_modules** - .:/usr/src/service/
working_dir: /usr/src/service/**volumes:
nodemodules:
external: true**](https://medium.com/u/d0bbc53072f4# ...</span><span id=)

[è¿™ä¹Ÿç¨å¾®æ”¹å˜äº†æˆ‘ä»¬çš„å¯åŠ¨è¿‡ç¨‹ï¼Œå› ä¸ºåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨`make setup`ç¡®ä¿è¯¥å·å­˜åœ¨ã€‚](https://medium.com/u/d0bbc53072f4# ...</span><span id=)

# [ç»“è®º](https://medium.com/u/d0bbc53072f4# ...</span><span id=)

[ä½¿ç”¨ Docker å¹¶ä¸æ€»æ˜¯éœ€è¦åšä¸€ä¸ª Docker æ–‡ä»¶ï¼é€šå¸¸ï¼Œä¸ºäº†å¼€å‘ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆ«äººçš„ï¼](https://medium.com/u/d0bbc53072f4# ...</span><span id=)

[æˆ‘å¸Œæœ›æˆ‘å·²ç»å‘æ‚¨å±•ç¤ºäº†å¿«é€Ÿä½¿ç”¨ Docker å’Œ docker-compose for development çš„ç®€å•æ–¹æ³•ã€‚](https://medium.com/u/d0bbc53072f4# ...</span><span id=)

[å¦‚æœä½ è§‰å¾—è¿™æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä¸€äº›æŒå£°ğŸ‘è¿˜æ˜¯ä¸€ä»½ï¼Œä¸€å®šè¦å…³æ³¨æˆ‘ï¼](https://medium.com/u/d0bbc53072f4# ...</span><span id=)

[è¦äº†è§£å¦‚ä½•åœ¨ CI ç®¡é“ä¸­ä¸ºç”Ÿäº§åˆ›å»ºå¤šé˜¶æ®µæ„å»ºï¼Œæˆ–è€…å¦‚ä½•ä½¿ç”¨ docker-compose è¿è¡Œé˜¶æ®µæµ‹è¯•ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„æ–‡ç« :](https://medium.com/u/d0bbc53072f4# ...</span><span id=)[æˆ‘æœ‰ä¸€ä¸ªå¦ç™½â€¦æˆ‘å‘ master æ‰¿è¯ºã€‚](https://hackernoon.com/i-have-a-confession-to-make-i-commit-to-master-6a804f334beb)

åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤º[å¦‚ä½•ä½¿ç”¨æ—æŒºã€æ ¼å¼åŒ–å’Œä»£ç è¦†ç›–ç‡å•å…ƒæµ‹è¯•](https://hackernoon.com/enforcing-code-quality-for-node-js-c3b837d7ae17)æ¥åŠ å¼ºä»£ç è´¨é‡ï¼Œè¿™æ˜¯æˆ‘ä»¬å®Œæˆç”Ÿäº§å°±ç»ªçš„å¤šé˜¶æ®µ docker æ–‡ä»¶æ¥æ‰“åŒ…ä»£ç ä¹‹å‰çš„å…³é”®æ­¥éª¤ã€‚

æœ€å¥½ï¼Œ
[æé›…è¾¾æ–¯ç§‘ç‰¹](https://twitter.com/pat_scott)

æŸ¥çœ‹æœ¬ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼è¿™æ˜¯ç¬¬äºŒéƒ¨åˆ†ã€‚

[](https://hackernoon.com/move-over-next-js-and-webpack-ba367f07545) [## ç¬¬ 1 éƒ¨åˆ†:è®¨è®º Next.js å’Œ WebpackğŸ¤¯

### ç®€å•æµæœåŠ¡å™¨ç«¯æ¸²æŸ“(SSR)ååº”+æ ·å¼-ç»„ä»¶ä¸åŒ…è£¹

hackernoon.com](https://hackernoon.com/move-over-next-js-and-webpack-ba367f07545) [](https://hackernoon.com/enforcing-code-quality-for-node-js-c3b837d7ae17) [## ç¬¬ 3 éƒ¨åˆ†:åŠ å¼º Node.js çš„ä»£ç è´¨é‡

### ä½¿ç”¨æ—æŒºã€æ ¼å¼åŒ–å’Œå¸¦æœ‰ä»£ç è¦†ç›–çš„å•å…ƒæµ‹è¯•æ¥å®æ–½è´¨é‡æ ‡å‡†

hackernoon.com](https://hackernoon.com/enforcing-code-quality-for-node-js-c3b837d7ae17) [](https://hackernoon.com/the-100-code-coverage-myth-900b83d20d3d) [## ç¬¬ 4 éƒ¨åˆ†:100%ä»£ç è¦†ç›–ç‡çš„ç¥è¯

### ç°åœ¨äº’è”ç½‘ä¸Šæœ‰å¾ˆå¤šå»ºè®®è¯´ 100%çš„è¦†ç›–ç‡ä¸æ˜¯ä¸€ä¸ªæœ‰ä»·å€¼çš„ç›®æ ‡ã€‚æ˜¯å—ï¼Ÿ

hackernoon.com](https://hackernoon.com/the-100-code-coverage-myth-900b83d20d3d) [](https://hackernoon.com/a-tale-of-two-docker-multi-stage-build-layers-85348a409c84) [## ç¬¬ 5 éƒ¨åˆ†:ä¸¤å±‚(Docker å¤šé˜¶æ®µæ„å»º)çš„æ•…äº‹

### Node.js çš„ç”Ÿäº§å°±ç»ª docker æ–‡ä»¶

hackernoon.com](https://hackernoon.com/a-tale-of-two-docker-multi-stage-build-layers-85348a409c84)