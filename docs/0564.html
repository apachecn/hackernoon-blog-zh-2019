<html>
<head>
<title>How to Integrate Next.Js and Hasura</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ¥ä¸‹æ¥å¦‚ä½•æ•´åˆã€‚Jså’Œå“ˆè‹æ‹‰</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/how-to-integrate-next-js-and-hasura-4a964424db6d?source=collection_archive---------7-----------------------#2019-01-23">https://medium.com/hackernoon/how-to-integrate-next-js-and-hasura-4a964424db6d?source=collection_archive---------7-----------------------#2019-01-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/7e8858aa241c4ec9978d30be42b384cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aRlgSQoiVLAC3w22.png"/></div></div></figure><p id="d4f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨æ‚¨å¼€å§‹è¿™ä¸ªé¡¹ç›®ä¹‹å‰ï¼Œæˆ‘å‡è®¾æ‚¨å¯¹Next.jså’ŒHasuraæœ‰åŸºæœ¬çš„äº†è§£ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•æ•´åˆNext.jså’ŒHasuraã€‚</p><h1 id="a9d1" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆã€‚Jsï¼Ÿ</h1><p id="4f5f" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated"><strong class="je hv"> Next.js </strong>æ˜¯ç”±<a class="ae ld" href="https://zeit.co/" rel="noopener ugc nofollow" target="_blank"> Zeit </a>åˆ›å»ºçš„JavaScriptæ¡†æ¶ã€‚å®ƒå…è®¸æ‚¨ä½¿ç”¨Reactæ„å»ºæœåŠ¡å™¨ç«¯å‘ˆç°å’Œé™æ€webåº”ç”¨ç¨‹åºã€‚è¿™æ˜¯å»ºç«‹ä½ ä¸‹ä¸€ä¸ªç½‘ç«™çš„å¥½å·¥å…·ã€‚å®ƒæœ‰è®¸å¤šå¾ˆæ£’çš„ç‰¹æ€§å’Œä¼˜ç‚¹ï¼Œå¯ä»¥è®©Nextjsæˆä¸ºæ„å»ºä¸‹ä¸€ä¸ªwebåº”ç”¨ç¨‹åºçš„é¦–é€‰ã€‚</p><p id="242f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¼€å§‹ä½¿ç”¨Next.jsä¸éœ€è¦ä»»ä½•webpackæˆ–ç±»ä¼¼çš„é…ç½®ï¼Œå®ƒè‡ªå¸¦é…ç½®ã€‚æ‚¨æ‰€éœ€è¦çš„å°±æ˜¯è¿è¡Œ<code class="eh le lf lg lh b">yarn run dev</code>å¹¶å¼€å§‹æ„å»ºæ‚¨çš„åº”ç”¨ç¨‹åºğŸ˜ƒã€‚</p><p id="7654" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ—¢ç„¶ä½ å·²ç»å‡†å¤‡å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff li"><img src="../Images/1b807ad418d5be37863a54120a49cab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/0*qVg_uAZ10kM7lvG8"/></div></figure><h1 id="9c15" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">å¦‚ä½•å»ºç«‹ä¸‹ä¸€ä¸ªï¼ŸJs appï¼Ÿ</h1><p id="5eae" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">æˆ‘å¸Œæœ›ä½ çŸ¥é“create-react-appï¼Œå°±åƒæˆ‘ä»¬æœ‰create-next-appä¸€æ ·ï¼Œå®ƒå°†å®Œæˆè®¾ç½®Next.jsé¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰å·¥ä½œğŸ˜‰ã€‚</p><p id="024e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœæ‚¨ä½¿ç”¨yarnæˆ–npxï¼Œæœ‰ä¸€ä¸ªå†…ç½®çš„è½¯ä»¶åŒ…å¯ä»¥åˆ›å»ºnext.jsåº”ç”¨ç¨‹åºï¼Œå®ƒä»¬æ˜¯:</p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="6f66" class="lr kb hu lh b fv ls lt l lu lv">yarn create next-app my-app</span><span id="d540" class="lr kb hu lh b fv lw lt l lu lv">npx create-next-app my-app</span></pre><p id="4545" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœæ‚¨ä½¿ç”¨npmï¼Œé‚£ä¹ˆåº”è¯¥å®‰è£…<strong class="je hv"> create-next-app </strong>åŒ…ï¼Œä½¿ç”¨è¯¥åŒ…å¯ä»¥è®¾ç½®ä¸€ä¸ªæ–°é¡¹ç›®ã€‚</p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="966a" class="lr kb hu lh b fv ls lt l lu lv">npm install -g create-next-app</span><span id="214d" class="lr kb hu lh b fv lw lt l lu lv">create-next-app my-app</span></pre><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/e4e8cf9e9b4de0da2002695142cd1c2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*X17ZjRG4x_B7jwDREXOqKQ.png"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">create-next-app</figcaption></figure><p id="1a9a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ­£å¦‚æ‚¨åœ¨å›¾åƒä¸­çœ‹åˆ°çš„ï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œæ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶éƒ½å·²å‡†å¤‡å°±ç»ªã€‚ä¸€æ—¦é¡¹ç›®è®¾ç½®å®Œæ¯•ï¼Œå°†ä¼šæ˜¾ç¤ºå¯åŠ¨å’Œæ„å»ºé¡¹ç›®æ‰€éœ€çš„å‘½ä»¤ã€‚</p><p id="8da6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ„å»ºé¡¹ç›®è¿è¡Œ<code class="eh le lf lg lh b">yarn build</code></p><p id="23cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¦å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œè¯·è¿è¡Œ<code class="eh le lf lg lh b">yarn dev</code></p><p id="97bc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨ç”Ÿäº§è¿è¡Œä¸­å¯åŠ¨æœåŠ¡å™¨<code class="eh le lf lg lh b">yarn start</code></p></div><div class="ab cl mc md hc me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hn ho hp hq hr"><p id="4d10" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†åŸºæœ¬é¡¹ç›®ï¼Œè®©æˆ‘ä»¬å®‰è£…hasura graphQLå¼•æ“ã€‚</p><p id="5da4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a class="ae ld" href="https://heroku.com/deploy?template=https://github.com/hasura/graphql-engine-heroku" rel="noopener ugc nofollow" target="_blank">ä¸€é”®å¼</a>éƒ¨ç½²é€‰é¡¹è½»æ¾è®¾ç½®hasura-graphQLå¼•æ“ã€‚ä¸€æ—¦å®ƒè¢«éƒ¨ç½²ï¼Œä½ å¯ä»¥å»éƒ¨ç½²çš„ç½‘å€ï¼Œä½ ä¼šæœ‰è¿™æ ·çš„ä¸œè¥¿ã€‚</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/02b802ea0c30419903bff4c7837a4d73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_fLcC6ttPsxm2R7ew8xIvA.png"/></div></div></figure><p id="f501" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨ä¸»é¡µé¡¶éƒ¨è®°ä¸‹ç½‘å€ã€‚</p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="fd64" class="lr kb hu lh b fv ls lt l lu lv"><a class="ae ld" href="https://hasuragraphql-engine.herokuapp.com/v1alpha1/graphql" rel="noopener ugc nofollow" target="_blank">https://hasuragraphql-engine.herokuapp.com/v1alpha1/graphql</a></span></pre><p id="6c37" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å•å‡»é¡¶éƒ¨æ ä¸­çš„æ•°æ®ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mk"><img src="../Images/f60af9de68c21e7e35d432193b7315b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pc-pI_R4DKE7A2NJJHXBYw.png"/></div></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">author table</figcaption></figure><p id="b725" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨è¡¨ä¸­æ·»åŠ ä¸€ä¸ªè™šæ‹Ÿæ•°æ®</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/d7e06c7275e8538c312c857142433eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*0p0Vj7qOPWlhY8KnePlaoA.png"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Adding a dummy author</figcaption></figure><p id="c988" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸€æ—¦hasuraå¼•æ“å®‰è£…å®Œæ¯•ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­è¿æ¥Hasuraå’ŒNext.jsäº†ã€‚</p><p id="f7cf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å®‰è£…<strong class="je hv"> graphql-tag </strong>ã€<strong class="je hv"> next-apollo </strong>å’Œ<strong class="je hv"> react-apolloã€‚</strong></p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="b112" class="lr kb hu lh b fv ls lt l lu lv">yarn add graphql-tag next-apollo react-apollo</span></pre><p id="0d5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸€æ—¦å®‰è£…äº†ä¸Šé¢çš„åŒ…ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªconfig.jsæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç </p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/12761257044af4b9afd11fd553120c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*8MlUQ-bemwVpJkr-2Y8RcA.png"/></div></figure><p id="b3d4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å°†uriæ›¿æ¢ä¸ºæ‚¨éƒ¨ç½²çš„å¼•æ“æ‰€æŒ‡å‘çš„urlã€‚è¿™å°†ä¸º<code class="eh le lf lg lh b">withData</code>é…ç½®ä¸€ä¸ª<code class="eh le lf lg lh b">httpLink</code>æ¥è¿æ¥åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„GraphQLæœåŠ¡å™¨URLã€‚</p><p id="ff8f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸‹ä¸€ä¸ªä»»åŠ¡æ˜¯ç”¨æ¥è‡ª<code class="eh le lf lg lh b">react-apollo</code>çš„<code class="eh le lf lg lh b">Query</code>ç»„ä»¶åŒ…è£…æ‚¨çš„é¡µé¢ç»„ä»¶ï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨ç«¯å‘ˆç°é¡µé¢æ—¶å¯ä»¥è·å–é€‚å½“çš„æ•°æ®ã€‚</p><h2 id="2f58" class="lr kb hu bd kc mn mo mp kg mq mr ms kk jn mt mu ko jr mv mw ks jv mx my kw mz dt translated">GraphQLæŸ¥è¯¢</h2><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="29bd" class="lr kb hu lh b fv ls lt l lu lv">const query = gql`<br/>   query {<br/>    author {<br/>     id<br/>     name<br/>    }<br/>   }<br/>`</span></pre><h2 id="c456" class="lr kb hu bd kc mn mo mp kg mq mr ms kk jn mt mu ko jr mv mw ks jv mx my kw mz dt translated">ç”¨æŸ¥è¯¢åŒ…è£…ç»„ä»¶</h2><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="776e" class="lr kb hu lh b fv ls lt l lu lv">&lt;Query query={ query } fetchPolicy={ 'cache-and-network' }&gt;<br/>    {({ loading, data: { author:authors }}) =&gt; {<br/>      return (<br/>        &lt;div&gt;<br/>          &lt;div&gt;<br/>           {authors.map((a, i) =&gt; (<br/>              &lt;div key={i}&gt;<br/>               &lt;h2&gt;{a.name}&lt;/h2&gt;<br/>              &lt;/div&gt;<br/>           ))}<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      );<br/>    }}<br/>&lt;/Query&gt;</span></pre><p id="6187" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸€æ—¦è¿™äº›ä»£ç è¢«ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ç±»ä¼¼è¿™æ ·ä¸œè¥¿ğŸ‘‡ã€‚</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff na"><img src="../Images/a7a449bad9fb3ea989ce308448622df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*CALyoF0vqkAqn-Bj736EXg.png"/></div></figure><p id="03d8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿è¡Œ<code class="eh le lf lg lh b">yarn run dev</code>,ä½ çš„hasura-next.jsåº”ç”¨å°±å¯åŠ¨å¹¶è¿è¡Œäº†ã€‚</p><p id="0eaf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨ä½ çš„æµè§ˆå™¨ä¸­æ‰“å¼€<a class="ae ld" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">http://localhost:3000</strong></a>ï¼Œä½ ä¼šåœ¨ä¸»é¡µä¸­çœ‹åˆ°æˆ‘ä»¬åœ¨hasuraå¼•æ“ä¸­åˆ›å»ºçš„ä½œè€…ã€‚</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/29e8b8272b4fff802c4793d1a4e2ee2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*QmZmp76uQ5aIH-ce07B0qA.png"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Authors page</figcaption></figure><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/b2b47e232ce7d8a22a87568974d4792b.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*4E8t3_H4mZzTTU8N"/></div></figure><p id="f651" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å°±æ˜¯è¿™æ ·ï¼Œä½¿ç”¨Hasura Graphqlå¼•æ“åˆ›å»ºNext.jsåº”ç”¨ç¨‹åºæ˜¯å¦‚æ­¤ç®€å•ğŸ™Œã€‚æ‚¨å¯ä»¥æ‰©å±•å®ƒä»¥åŒ…æ‹¬æ›´å¤šçš„åŠŸèƒ½å’Œæ›´å¥½çš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚ä½¿ç”¨<code class="eh le lf lg lh b">yarn build</code>éƒ¨ç½²æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œè¿™å°†ä¸ºæ‚¨æä¾›é™æ€ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨Githubæˆ–Netlifyè½»æ¾éƒ¨ç½²ã€‚</p><h1 id="8937" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">å…³äºæˆ‘</h1><p id="1c65" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">æˆ‘å«<strong class="je hv"> Aswin VB </strong>ã€‚æˆ‘æ˜¯é˜¿æ‹‰å“ˆå·´å¾·å°åº¦ä¿¡æ¯æŠ€æœ¯å­¦é™¢çš„ä¸€åæœ¬ç§‘ç”Ÿï¼Œæ­£åœ¨æ”»è¯»ä¿¡æ¯æŠ€æœ¯çš„å­¦å£«å­¦ä½ã€‚</p><p id="c392" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘å–œæ¬¢åˆ›é€ å’Œå­¦ä¹ æ–°äº‹ç‰©ï¼Œå½“æˆ‘æœ‰ç©ºçš„æ—¶å€™æˆ‘æ€»æ˜¯è¿™æ ·åšã€‚æˆ‘å–œæ¬¢ç”¨J <strong class="je hv"> avaScriptå’ŒPython </strong>ç¼–å†™ä»£ç ã€‚</p><p id="8aef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½ å¯ä»¥åœ¨<a class="ae ld" href="https://twitter.com/aswinvb1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>å’Œ<a class="ae ld" href="https://github.com/aswinzz" rel="noopener ugc nofollow" target="_blank"> GitHub </a>ä¸Šå…³æ³¨æˆ‘ã€‚</p></div></div>    
</body>
</html>